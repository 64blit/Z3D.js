function _0x21f5(b,k){const l=_0x1409();return _0x21f5=function(y,E){return y=y-385,l[y]},_0x21f5(b,k)}function _0x1409(){const b=["Box3","NoBlending","distance","getBackgroundModelsByZone","getLoopingAnimations","sceneWrapper","onHoverAnimations","getCameraAnimationStart","all","onClickAnimations","loadJson","ROTATE","targetPosition","DEBUG","duration","getElementById","setDRACOLoader","isPostEffectsEnabled","light","getCamera","touchAction","lights","object","fitCameraOffset","onClick","nextSceneZone","getRaycastTarget","model","onhashchange","models","5108wTVZAO","closeDynamicContent","then","camera","canvasID","lookAtTarget","getIntersectableObjects","postEffects","keys","setDynamicContent","pushState","4240145CScpzD","https://unpkg.com/three@0.147.0/examples/js/libs/draco/","getAnimations","setupGyro","normalBias","clientX","create","error","wrappedAnimations","getAnimation","EXRLoader_js","orbitCameraTo","updatePointer","azimuthAngle","blendMode","Mesh","directionalLight","visible","querySelector","domElements","EffectComposer_js","activate","Cache","build","intersectObjects","push","gltfLoader","setDampFactor","pointerType","cursor","height","changeSceneZoneByName","path","map","threshold","https://unpkg.com/three@0.149.0/examples/jsm/postprocessing/RenderPass.js","halfWindowWidth","tracks","maxZoom","freeze","mouseButtons","setLength","pointerDownCallback","addDirectionalLight","controls","onHoverOff","multiplyScalar","cameraParams","lookAtTargetBox","get","environment","userAgent","none","getBoundingClientRect","undefined","canvas","UnrealBloomPass","domElement","PointLight","fitCameraToZone","AxesHelper","max","https://unpkg.com/three@0.149.0/examples/jsm/loaders/GLTFLoader.js","createModelContainer","rotation","iframe","AmbientLight","animation","onHoverOffCallback","frame",".XYZ3d-close","boxCenter","tiltX","pointer","getInteractableObject","reading","5843745HsHXTD","fill","high-performance","toneMappingExposure","bloomPass","947700TwjFBt","fov","point","updateSceneZones","changeSceneZoneByIndex","player","contentContainer","defaultRotationDistance","lookAtTargetSize","animations","getSize","maxPolarAngle","remove","EXRLoader",'<iframe id="XYZ3d-fullscreen" src="',"interactablesContent","onHover","pointerdown",'"></iframe>',"loaded","RGBELoader_js","DirectionalLight","lerp","hash","compileEquirectangularShader","pop","gyro","getHtml","color","clientY","getHitObject","strength","hoverOffCallback","size","setupRaycaster","pow","getInteractableModelsByZone","getCenter","The gryto motion sensor is not supported on this device.","onPointerMove","iframe not found. Make sure this returns the correct element: document.getElementById(","mouseup","background","material","hiddenSelector","getScene","isMobileDevice","default","add","followMouse","fromEquirectangular","getBoundingBox","top","minPolarAngle","paused","polarAngle","bgMesh","_intersections","Module","moveCamera","init","nextScene","setZoom","zeroSlopeAtStart","THREE","processModel","ambientLight","zoomTo","XYZ3d-hidden","17826ZuijGR","moveTo","tiltXArr","getCameraBoundsObject","maxGyroSignals","Vector2","setModelMatrixData","forEach","onHoverOver","raycastTarget","https://unpkg.com/three/build/three.module.js","addDynamicCloseButton","Clock","round","interactables","https://unpkg.com/three@0.149.0/examples/jsm/postprocessing/ShaderPass.js","scrollWidth","random","rotateCamera","resetControlsLimits","onPointerDown","getAnimationsFromCSV","EquirectangularReflectionMapping","rotateTo","wrappedModels","right","https://unpkg.com/three@0.149.0/examples/jsm/loaders/EXRLoader.js","gltf","25orNffC","play","style","showLoadingScreen","scale","https://unpkg.com/three@0.149.0/examples/jsm/loaders/RGBELoader.js","setInputActive","activeSceneZone","resetCamera","includes","receiveShadow","defaultDampFactor","enableAll","getRandomIntRange","addPointLight","aspect",".quaternion","572rhKrrW","looping","classList","loadingScreen","name","361266oxlAIK","parse","touches","setSize","smoothTime","userData","resize","removeEventListener","type","ACTION","tiltYArr","onProgressLoading","innerHeight","https://unpkg.com/three@0.149.0/examples/jsm/postprocessing/UnrealBloomPass.js","MAX_SAFE_INTEGER","XYZ3d-visible","hoveroff","dispatchEvent","intersectableObjects","Group","visibleSelector","Vector3","sub","pushHashURL","getHtmlData","bloom","LoopOnce","json","position","https://unpkg.com/three@0.149.0/examples/jsm/postprocessing/EffectComposer.js","shadowMap","auto","update","back","EffectComposer","onWindowResized","values","backgroundIntensity","modelName","openLink","reset","castShadow","ReinhardToneMapping","toStringTag","scene","setCameraOffset","fps","addPass","stopAllAction","layers","distanceTo","rotationTarget","setFromCamera","render","GLTFLoader_js","https://cdn.jsdelivr.net/npm/camera-controls/dist/camera-controls.min.js","history","texture","addLighting","lookAt","transformGroup","Camera","split","minAzimuthAngle","RenderPass","setupCamera","click","setupRenderer","setLoop","innerHTML","hoverOverCallback","finalComposer","mouse","set","onHoverOverCallback","_camera","GLTFLoader","onPointerDownCallback","dispose","touch","getWrappedAnimations","deactivate","getSceneWrapper","length","AnimationMixer","maxAzimuthAngle","raycastMesh","addEXR","gltf children :>> ","setupPostEffects","average","addHDR","open","Object3D","amd","renderer","expandByObject","start","filmOffset","BackSide","getSceneZoneByName","defineProperty","_selected","activeZoneIndex","loadModel","bloomParams","min","PMREMGenerator","onPointerUp","isOverlayActive","interactable","insertAdjacentHTML","minStaticFrames","iframeID","radius","loadingScreen not found. Make sure this returns the correct element: document.getElementById(","goToZone","exposure","children","load","_objects","raycastManager","backgroundBlurriness","intensity","cameraAnimations","element","beforeend","orbit",");  ","content","jsonData","4431320aBmcYd","saveState","setPaused","width","getSceneZoneByIndex","269ekaTvK","wrappedSceneZones","_domElement","getModel","hdr","createLightContainer","clone","_hovered","getRandomRange","onUpdate",":>> GLTF element unrecognized:","setLookAt",'<div id="XYZ3d-close-btn" class="XYZ3d-close-btn"><span>âœ•</span',"updateProjectionMatrix","bind","cameraBounds","target","install","enabled","addEventListener","restThreshold","addAmbientLight","#XYZ3d-close-btn","zoneBox","getInteractables","scrollHeight","quaternionToVector3","getObjects","quaternion","zone","index","getPlayer","log","loopAnimations","clampWhenFinished","showDynamicHTML","getRenderer","changeCameraZone","normalize","setDynamicHTML","mapping","jsonPath","getAnimationTrack","getInteractablesByZone","loadingScreenID","left","hoveron","tiltY","RGBELoader"];return _0x1409=function(){return b},_0x1409()}(function(b,k){const l=_0x21f5,y=b();for(;[];)try{if(parseInt(l(452))/1*(parseInt(l(531))/2)+-parseInt(l(692))/3*(parseInt(l(737))/4)+-parseInt(l(720))/5*(-parseInt(l(742))/6)+parseInt(l(542))/7+parseInt(l(447))/8+-parseInt(l(618))/9+-parseInt(l(623))/10===k)break;y.push(y.shift())}catch{y.push(y.shift())}})(_0x1409,553950),function(b,k){const l=_0x21f5;typeof exports===l(523)&&typeof module<"u"?module.exports=k(require(l(702)),require(l(604)),require("https://unpkg.com/three@0.149.0/examples/jsm/loaders/DRACOLoader.js"),require(l(725)),require(l(718)),require("https://unpkg.com/three@0.149.0/examples/jsm/postprocessing/UnrealBloomPass.js"),require(l(577)),require(l(771)),require(l(707)),require("https://unpkg.com/three@0.149.0/examples/jsm/shaders/FXAAShader.js"),require("https://cdn.jsdelivr.net/npm/camera-controls/dist/camera-controls.min.js")):typeof define=="function"&&define[l(410)]?define(["https://unpkg.com/three/build/three.module.js","https://unpkg.com/three@0.149.0/examples/jsm/loaders/GLTFLoader.js","https://unpkg.com/three@0.149.0/examples/jsm/loaders/DRACOLoader.js",l(725),l(718),l(755),l(577),l(771),l(707),"https://unpkg.com/three@0.149.0/examples/jsm/shaders/FXAAShader.js",l(797)],k):(b=typeof globalThis!==l(596)?globalThis:b||self,b.XYZ3d=k(b[l(687)],b[l(796)],b.DRACOLoader_js,b[l(643)],b[l(552)],b.UnrealBloomPass_js,b.RenderPass_js,b[l(562)]))}(this,function(b,k,l,y,E,D,O,R){"use strict";const i=_0x21f5;function I(_){const t=_0x21f5,e=Object[t(548)](null,{[Symbol[t(785)]]:{value:t(681)}});if(_){for(const x in _)if(x!==t(670)){const s=Object.getOwnPropertyDescriptor(_,x);Object[t(417)](e,x,s[t(591)]?s:{enumerable:!![],get:()=>_[x]})}}return e[t(670)]=_,Object[t(581)](e)}const d=I(b);class B{static[i(460)](t,e){return Math[i(709)]()*(e-t)+t}static[i(733)](t,e){const x=i;return Math[x(705)](Math[x(709)]()*(e-t)+t)}static[i(478)](t,e,x,s){const a=t+t,n=e+e,o=x+x,c=t*n,f=t*o,u=e*o,m=s*a,A=s*n,S=s*o;return{x:c-S,y:u+m,z:f-A}}static map(t,e,x,s,a){return(t-e)*(a-s)/(x-e)+s}static[i(406)](t){const e=i;let x=0;return t.forEach(s=>{x+=s}),x/t[e(399)]}}class Z{constructor(t,e,x){const s=i;this[s(632)]=x,this.models=t,this[s(522)]=e,this[s(716)]={interactables:[],bg:[],player:null},this[s(550)]={looping:[],onClick:[],onHover:[],camera:[]},this[s(453)]=[],this.wrapScene(this[s(530)]),this.updateSceneZones(this.wrappedSceneZones)}wrapScene(t){const e=i,x={interactables:[],bgMesh:[],player:null},s=[];for(let a=0;a<t[e(399)];a++){const n=t[a],o=n[e(528)][e(747)];let c={};const f=this[e(544)](o,n[e(741)]);switch(o.type){case"interactable":c=this[e(616)](n,o,f),x.interactables[e(567)](c);break;case e(467):c=this[e(695)](n,o),s[e(567)](c);break;case e(679):x[e(679)][e(567)](n[e(528)]);break;case e(402):x[e(679)].push(n[e(528)]);break;case e(628):x.player=n[e(528)];break}}this[e(716)]=x,this[e(453)]=s}[i(626)](t){const e=i,x=[...t];for(let s=0;s<x.length;s++){const a=x[s],n=a[e(770)],o=this[e(659)](a[e(481)]);o[e(399)]<=0&&this[e(504)](a.zone)[e(699)](A=>{o.push(A)});const c=this[e(674)](o),f=new d[e(763)];c[e(660)](f);const u=new d.Vector3;c[e(633)](u),x[s][e(613)]=n,x[s][e(590)]=c,x[s][e(631)]=u,x[s][e(536)]=f}this[e(453)]=x}getSceneZoneByIndex(t){const e=i;let x=null;return this[e(453)][e(699)](s=>{s.index===t&&(x=s)}),x}[i(416)](t){const e=i;let x=null,s=null;return this[e(453)][e(699)](a=>{a[e(481)]===t&&(x=a)}),{zoneBox:x,index:s}}[i(505)](){const t=i,e={looping:[]};return this[t(550)][t(738)].forEach(x=>{const s=t;x[s(632)][s(699)](a=>{const n=s;e[n(738)][n(567)](a)})}),e}[i(396)](){return this[i(550)]}[i(483)](){const t=i;return this[t(716)][t(628)]}[i(476)](){const t=i;return this[t(716)][t(706)]}[i(495)](t){const e=i,x=[];for(let s=0;s<this[e(716)].interactables[e(399)];s++){const a=this.wrappedModels.interactables[s];a.zone===t&&x[e(567)](a)}return x}[i(659)](t){const e=i,x=[];for(let s=0;s<this[e(716)][e(706)][e(399)];s++){const a=this[e(716)].interactables[s];a.zone===t&&x.push(a[e(441)][e(528)])}return x}[i(504)](t){const e=i,x=[];for(let s=0;s<this[e(716)].bgMesh[e(399)];s++){const a=this[e(716)].bgMesh[s];a.type===e(761)?a[e(434)][e(699)](n=>{const o=e;a.userData[o(481)]===t&&x[o(567)](n)}):a.userData[e(481)]===t&&x[e(567)](a)}return x}[i(674)](t){const e=i,x=new d[e(501)];t[e(750)]===e(761)&&(t=[...t[e(434)]]);for(let s=0;s<t[e(399)];s++){const a=t[s];x[e(412)](a)}return x}getModel(t){const e=i;for(let x=0;x<this[e(530)][e(399)];x++){const s=this[e(530)][x][e(528)];if(s[e(741)]===t)return s}return null}[i(551)](t){const e=i;for(let x=0;x<this[e(632)][e(399)];x++){const s=this[e(632)][x];if(s[e(741)]===t)return s}return null}getAnimationsFromCSV(t){const e=i,x=t[e(804)](","),s=[];for(let a=0;a<x.length;a++){const n=x[a];s[e(567)](this.getAnimation(n))}return s}[i(494)](t,e){const x=i;for(let s=0;s<t[x(579)][x(399)];s++)if(t[x(579)][s][x(741)]===e)return t.tracks[s];return null}[i(508)](t){const e=i,x={position:null,rotation:null};for(let s=0;s<t.camera.length;s++){const a=t.camera[s];for(let n=0;n<a.tracks[e(399)];n++){const o=a[e(579)][n];if(o[e(741)][e(729)](".position"))x[e(770)]=new d[e(763)](o[e(778)][0],o[e(778)][1],o[e(778)][2]);else if(o[e(741)][e(729)](e(736))){const c=new d.Quaternion(o.values[0],o[e(778)][1],o[e(778)][2],o[e(778)][3]);x[e(606)]=c}}}return x}getAnimations(t,e){const x=i;let s=null,a=null,n=null,o=null;return x(485)in t&&(s=this[x(713)](t[x(485)]),this[x(550)][x(738)].push({name:e,animations:s})),x(510)in t&&(a=this[x(713)](t[x(510)]),this[x(550)][x(525)][x(567)]({name:e,animations:a})),x(507)in t&&(n=this.getAnimationsFromCSV(t[x(507)]),this[x(550)].onHover[x(567)]({name:e,animations:n})),x(440)in t&&(o=this.getAnimationsFromCSV(t[x(440)]),this[x(550)][x(534)][x(567)]({name:e,animations:o})),{loopAnimations:s,onHoverAnimations:n,onClickAnimations:a,cameraAnimations:o}}[i(616)](t,e,x){const s=i,a=this[s(527)](e[s(701)]),n={name:t[s(741)],raycastTarget:a,element:t,animations:{},zone:e[s(481)]};return x[s(507)]!==null&&(n[s(632)][s(639)]=x[s(507)]),x[s(510)]!==null&&(n[s(632)][s(525)]=x[s(510)]),x.cameraAnimations!==null&&(n[s(632)][s(534)]=x[s(440)]),n}[i(695)](t,e){const x=i,s={zone:e[x(481)],index:parseInt(e[x(482)],10),position:t[x(528)][x(770)]};return t.model[x(559)]=![],s}[i(527)](t){const e=i,x=this[e(455)](t);return x==null?(console[e(484)]("Missing raycast target for: ",t),null):(x[e(666)].side=d[e(415)],x.material[e(559)]=![],x)}}class H{async parse(t){const e=i;let x=null;return await fetch(t)[e(533)](s=>s[e(769)]())[e(533)](s=>{x=s}),x}}class G{constructor(t,e,x){const s=i;this[s(786)]=t,this[s(411)]=e,this[s(493)]=x,this[s(506)];const a=new l.DRACOLoader;if(a.setDecoderPath(s(543)),this[s(568)]=new k[s(392)],this[s(568)][s(517)](a),window[s(514)]){const n=new d[s(602)](5e3);this[s(786)].add(n)}}[i(398)](){return this.sceneWrapper}async[i(511)](){const t=i;return await new H()[t(743)](this.jsonPath)}async[i(565)](t){const e=i,x=await this[e(511)](),s=[],a=[],n=await this.addGLTFModel(x[e(530)],t),o=this[e(800)](x[e(522)]);return o[e(567)](...n[e(522)]),s[e(567)](...n.models),a[e(567)](...n[e(632)]),this[e(506)]=new Z(s,o,a),this[e(506)]}async addGLTFModel(t,e){const x=i,s=[],a=[],n=[];for(let o=0;o<t[x(399)];o++){const c=t[o],f=function(u){const m=x;e(o+1,t.length,100*u[m(642)]/u.total)};await this[x(420)](c,f)[x(533)](u=>{const m=x;window.DEBUG&&console[m(484)](m(404),[...u[m(719)].scene[m(434)]]);const A=this[m(688)](u);s.push(...A.models),a[m(567)](...A.lights),n.push(...A.animations)})}return{models:s,lights:a,animations:n}}[i(455)](t,e){for(let x=0;x<t.length;x++){const s=t[x];if(s.name===e)return s}return null}[i(605)](t,e){const x=i,s={name:t[x(741)],model:t};switch(this[x(698)](t,e),t[x(783)]=e[x(783)],t[x(730)]=e[x(730)],t[x(747)][x(750)]){case"bgMesh":break;case x(426):const a=this[x(650)](e,t[x(741)]);s.contentType=a[x(750)],s[x(445)]=a[x(445)];break}return s}[i(457)](t,e){return{type:t,light:e}}[i(688)](t){const e=i,x=[...t.gltf[e(786)][e(434)]],s=t[e(719)][e(632)],a=[],n=[],o=1e5;for(let c=0;c<x.length;c++){const f=x[c];switch(f[e(791)][e(732)](),f.type){case e(557):a[e(567)](this.createModelContainer(f,t[e(446)]));break;case e(761):f.children[e(699)](u=>{const m=e;this[m(698)](u,t[m(446)])}),a[e(567)](this[e(605)](f,t.jsonData));break;case e(409):a.push(this[e(605)](f,t[e(446)]));break;case"PointLight":f[e(439)]/=o,n[e(567)](this.createLightContainer(e(625),f));break;case e(644):f.intensity/=o,n[e(567)](this[e(457)]("directional",f));break;case"SpotLight":f[e(439)]/=o,n[e(567)](this[e(457)]("spot",f));break;default:console.log(e(462),f);break}this[e(786)][e(671)](f)}return{models:a,lights:n,animations:s}}[i(698)](t,e){const x=i;t.position.set(t[x(770)].x+e[x(770)].x,t[x(770)].y+e[x(770)].y,t[x(770)].z+e[x(770)].z),t[x(480)][x(389)](e.rotation.x,e.rotation.y,e[x(606)].z,e[x(606)].w),t[x(724)][x(389)](e[x(724)].x,e[x(724)].y,e[x(724)].z)}[i(650)](t,e){const x=i,s=this[x(766)](t,e);if(s[x(445)]!==void 0)return s.type===x(607)&&(s.content=x(637)+s[x(445)]+x(641)),s}[i(766)](t,e){const x=i,s=t[x(638)];for(let a=0;a<s[x(399)];a++){const n=s[a];if(n[x(780)]===e)return n}return null}async[i(420)](t,e){return new Promise(x=>this[_0x21f5(568)].load(".."+t.path,function(a){x({gltf:a,jsonData:t})},e,function(a){console.log("An error happened "+a)}))}[i(800)](t){const e=i,x=[];for(let s=0;s<t[e(399)];s++){const a=t[s];let n,o;const c={type:null,light:null};switch(a[e(750)]){case e(456):this[e(407)](a[e(574)],a[e(779)],a[e(438)]);break;case"exr":this[e(403)](a.path,a[e(779)],a[e(438)]);break;case"pointLight":n=new d[e(763)](a[e(770)].x,a[e(770)].y,a[e(770)].z),o=this[e(734)](n,a[e(651)],a[e(439)],a[e(656)],a[e(783)]),c.type="pointLight",c.light=o;break;case e(558):n=new d.Vector3(a.position.x,a.position.y,a.position.z);const f=new d[e(763)](a[e(468)].x,a.target.y,a[e(468)].z);o=this[e(585)](n,f,a[e(651)],a[e(439)],a.castShadow),c[e(750)]=e(558),c[e(519)]=o;break;case e(689):o=this.addAmbientLight(a.color,a[e(439)]),c[e(750)]=e(689),c[e(519)]=o;break}x[e(567)](c)}return x}[i(734)](t,e=0,x=1,s=1500,a=![]){const n=i,o=new d[n(600)](e,x,s);if(o[n(770)][n(645)](t,1),o[n(783)]=a,o[n(546)]=.1,this.scene[n(671)](o),window[n(514)]){const c=new d.PointLightHelper(o,.25);this[n(786)][n(671)](c)}return o}[i(473)](t=0,e=1){const x=i,s=new d[x(608)](t,e);return this[x(786)][x(671)](s),s}addDirectionalLight(t,e=new d[i(763)](0,0,0),x=16777215,s=2,a=![]){const n=i,o=new d[n(644)](x,s);if(o[n(770)][n(645)](t,1),o[n(468)].position[n(645)](e,1),o.castShadow=a,o.normalBias=.1,this[n(786)].add(o),this[n(786)][n(671)](o[n(468)]),window[n(514)]){const c=new d.DirectionalLightHelper(o);this[n(786)][n(671)](c)}return o}[i(407)](t,e,x){const s=i,a=new d[s(423)](this[s(411)]);a.compileEquirectangularShader();let n;new y[s(500)]()[s(435)](".."+t,o=>{const c=s;n=a[c(673)](o)[c(799)],this[c(786)][c(592)]=n,this[c(786)].background=n,this[c(786)][c(779)]=e,this[c(786)].backgroundBlurriness=x,o[c(394)](),a.dispose()})}addEXR(t,e,x){const s=i,a=new d.PMREMGenerator(this[s(411)]);a[s(647)]();let n;new E[s(636)]()[s(435)](".."+t,o=>{const c=s;o[c(492)]=d[c(714)],n=a[c(673)](o)[c(799)],this[c(786)][c(592)]=n,this[c(786)][c(665)]=n,this[c(786)][c(779)]=e,this[c(786)][c(438)]=x,o[c(394)](),a[c(394)]()})}}class F{constructor(t,e){const x=i;d[x(564)].enabled=!![],this.canvas=document.getElementById(t),!this[x(597)]&&console[x(549)]("Canvas not found. Make sure this returns the correct element: document.GetElementByID(",t,");  "),this[x(589)]=e,this[x(421)]=e[x(538)][x(767)],this[x(450)]=this[x(597)][x(708)],this[x(572)]=this[x(597)].scrollHeight,this.camera=new d.PerspectiveCamera(this[x(589)][x(624)],this.width/this[x(572)],.1,1e4),this[x(534)][x(741)]=x(803),this[x(786)]=new d.Scene,this[x(411)],this[x(387)],this[x(622)],this[x(518)]=e[x(538)].enabled,this[x(809)](),this[x(518)]&&this.setupPostEffects()}[i(520)](){return this.camera}[i(668)](){return this[i(786)]}getRenderer(){return this[i(411)]}[i(809)](){const t=i;this[t(411)]=new d.WebGLRenderer({canvas:this[t(597)],antialias:!![],powerPreference:t(620),failIfMajorPerformanceCaveat:!![]}),this[t(411)][t(772)][t(470)]=!![],this[t(534)][t(791)].enableAll(),this[t(411)].setSize(this[t(450)],this[t(572)]),this[t(411)].toneMapping=d[t(784)],this[t(411)][t(621)]=Math[t(658)](this.bloomParams[t(433)],4),this[t(411)].gammaFactor=4}[i(405)](){const t=i,e=new O[t(806)](this[t(786)],this[t(534)]),x=new D[t(598)](new d.Vector2(this[t(450)],this[t(572)]),this.bloomParams[t(654)],this.bloomParams[t(430)],this[t(421)][t(576)]);x[t(433)]=this[t(421)].exposure,x[t(576)]=this[t(421)][t(576)],x[t(654)]=this[t(421)][t(654)],x.radius=this[t(421)].radius,this[t(387)]=new R[t(776)](this[t(411)]),this[t(387)][t(745)](this[t(450)],this[t(572)]),this[t(387)][t(789)](e),this[t(387)].addPass(x)}[i(777)](){const t=i;this[t(450)]=this[t(597)][t(708)],this[t(572)]=this[t(597)][t(477)],this[t(534)].aspect=this[t(450)]/this[t(572)],this[t(534)].updateProjectionMatrix(),this[t(411)].setSize(this[t(450)],this[t(572)]),this[t(518)]&&this[t(387)][t(745)](this[t(450)],this[t(572)])}[i(782)](){this[i(777)]()}[i(795)](){const t=i;this[t(518)]?this[t(387)][t(795)]():this.renderer[t(795)](this[t(786)],this.camera)}}const P=new d.Raycaster;class X extends d.EventDispatcher{constructor(t,e,x){const s=i;super(),this[s(436)]=t,this[s(391)]=e,this._domElement=x,this._selected=null,this[s(459)]=null,this[s(680)]=[],this.fps=30,this[s(470)]=!![],this[s(802)]=![],this.halfWindowWidth=window.innerWidth/2,this[s(578)]=window[s(754)]/2,this[s(611)]=0,this[s(428)]=this.fps,this[s(760)]=this[s(537)](this._objects),this[s(615)]=new d.Vector2,this[s(662)]=a=>{const n=s;if(this[n(470)]!==![]&&(this.frame+=1,this[n(611)]>Number[n(756)]&&(this[n(611)]=0),this[n(554)](a),P[n(794)](this[n(615)],this[n(391)]),this[n(760)]==null&&(this[n(760)]=getIntersectableObjects(this[n(436)])),a[n(570)]===n(388)||a[n(570)]==="pen"||a[n(570)]===n(395)))if(this[n(680)][n(399)]=0,P[n(794)](this[n(615)],this[n(391)]),P[n(566)](this.intersectableObjects,![],this[n(680)]),this[n(680)].length>0){let o=this[n(680)][0][n(523)];o=this[n(653)](o[n(741)]),this[n(459)]!==o&&this[n(459)]!==null&&(this[n(759)]({type:n(758),object:this[n(459)]}),this[n(454)][n(722)][n(571)]="auto",this[n(459)]=null),this[n(459)]!==o&&(this[n(759)]({type:n(498),object:o}),this[n(454)][n(722)][n(571)]=n(615),this[n(459)]=o)}else this._hovered!==null&&(this[n(759)]({type:"hoveroff",object:this[n(459)]}),this[n(454)].style[n(571)]=n(773),this[n(459)]=null)},this[s(424)]=a=>{const n=s;if(this[n(470)]!==![]&&!(typeof a===TouchEvent&&a[n(744)][n(399)]>1)){if(this[n(611)]>Math[n(422)](this[n(788)]*2,20)){this[n(611)]=0;return}if(this[n(611)]=0,(this[n(760)]==null||this.intersectableObjects==null)&&(this[n(760)]=getIntersectableObjects(this[n(436)])),this[n(454)][n(722)][n(521)]=n(594),this[n(554)](a),this[n(680)].length=0,P[n(794)](this[n(615)],this[n(391)]),P[n(566)](this[n(760)],![],this._intersections),this[n(680)][n(399)]>0){const o=this[n(680)][0].object;this[n(418)]=this[n(653)](o.name),this[n(759)]({type:"pointerdown",object:this[n(418)]}),this[n(459)]=this[n(418)]}}},this[s(563)]()}[i(563)](){const t=i;this[t(454)][t(471)]("pointermove",this[t(662)]),this[t(454)][t(471)]("touchend",this[t(424)]),this[t(454)][t(471)]("mouseup",this[t(424)])}[i(397)](){const t=i;this[t(454)][t(749)]("pointermove",this[t(662)]),this[t(454)].removeEventListener("touchend",this[t(424)]),this[t(454)][t(749)](t(664),this.onPointerUp),this[t(454)][t(722)][t(571)]=""}[i(554)](t){const e=i,x=this[e(454)][e(595)]();this[e(615)].x=(t[e(547)]-x[e(497)])/x.width*2-1,this.pointer.y=-(t[e(652)]-x[e(675)])/x.height*2+1}[i(394)](){this[i(397)]()}[i(479)](){return this[i(436)]}[i(537)](t){const e=i,x=[];for(let s=0;s<t[e(399)];s++){const a=t[s];x[e(567)](a[e(701)])}return x}[i(653)](t){const e=i;for(let x=0;x<this[e(436)][e(399)];x++){const s=this[e(436)][x];if(s[e(701)][e(741)]===t)return s}return null}}class q{constructor(t,e){const x=i;CameraControls[x(469)]({THREE:t}),this[x(470)]=!![],this.paused=![],this.raycastManager,this[x(586)],this[x(534)],this[x(513)],this[x(584)],this[x(506)],this.activeSceneZone,this[x(731)]=.05,this[x(630)]=.05,this[x(589)]=e,this[x(419)]=0,this.tiltX=0,this[x(499)]=0,this[x(696)]=512,this[x(694)]=new Array(this[x(696)])[x(619)](0),this[x(752)]=new Array(this.maxGyroSignals)[x(619)](0),this[x(669)]=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator[x(593)]),this[x(524)]=this[x(669)]?1.5:3,this[x(793)]=new d.Vector2}[i(683)](t,e,x,s,a,n){const o=i;this[o(411)]=t,this[o(534)]=e,this[o(506)]=x,this[o(584)]=s,this[o(386)]=a,this[o(655)]=n,this.activeSceneZone=this[o(506)][o(451)](this[o(419)]),this[o(545)](),this[o(807)](),this.setupRaycaster(),this[o(728)]()}[i(545)](){const t=i;if(this[t(589)][t(649)])try{let e=new Gyroscope({frequency:15});e[t(471)](t(617),x=>{const s=t;this[s(694)].push(e.y*2),this[s(752)][s(567)](e.x*2),this[s(614)]=B.average(this[s(694)]),this.tiltY=B[s(406)](this[s(752)]),this[s(694)][s(399)]>this[s(696)]&&(this.tiltXArr[s(648)](),this[s(752)][s(648)]())}),e[t(413)]()}catch(e){console[t(484)](t(661),e)}}[i(807)](){const t=i;this[t(534)][t(770)][t(645)](this[t(727)].boxCenter,1),this[t(534)][t(801)](this[t(727)][t(536)]),this[t(601)](this[t(524)]),this[t(586)]&&this[t(586)][t(394)](),this[t(586)]=new CameraControls(this[t(534)],this[t(411)][t(599)]),this.controls[t(472)]=.1,this[t(711)]()}[i(711)](){const t=i;this[t(589)].orbit!==!![]&&(this.controls[t(582)][t(717)]=CameraControls[t(751)][t(512)],this[t(586)][t(744)].two=CameraControls[t(751)].TOUCH_ZOOM,this[t(586)][t(401)]=this[t(586)].azimuthAngle+this[t(630)],this[t(586)].minAzimuthAngle=this[t(586)][t(555)]-this[t(630)],this.controls[t(634)]=this.controls[t(678)]+this.defaultRotationDistance,this[t(586)].minPolarAngle=this.controls[t(678)]-this[t(630)],this.controls.maxDistance=this[t(586)][t(503)]*2,this[t(586)][t(580)]=this.controls[t(503)]*2,this[t(793)]=new d[t(697)](this[t(586)][t(555)],this.controls[t(678)]))}[i(657)](){const t=i;this[t(437)]&&this[t(437)][t(394)]();const e=this[t(506)].getInteractablesByZone(this[t(727)][t(481)]);this[t(437)]=new X(e,this.camera,this[t(411)][t(599)]),this[t(437)][t(471)](t(640),this[t(712)][t(466)](this)),this[t(437)][t(471)](t(498),this[t(700)].bind(this)),this[t(437)][t(471)](t(758),this[t(587)].bind(this))}[i(526)](){const t=i;this[t(419)]+=1,this[t(506)][t(453)][t(399)]<=this[t(419)]&&(this[t(419)]=0),this.changeSceneZoneByIndex(this.activeZoneIndex)}[i(627)](t,e=.01){const x=i,s=this.sceneWrapper[x(451)](t);this.activeZoneIndex=t,this[x(489)](s,e)}changeSceneZoneByName(t,e=.01){const x=i,s=this[x(506)][x(416)](t);this[x(419)]=s.index,this.changeCameraZone(s[x(475)],e)}changeCameraZone(t,e=.01){const x=i;this[x(727)]=t;const s=this[x(601)](this[x(524)]);this[x(726)](![]),this[x(553)](t[x(613)],t.lookAtTarget,s,e)[x(533)](()=>{const a=x;this.controls[a(448)](),this[a(711)](),this[a(726)](!![])}),this[x(657)]()}[i(601)](t=3){const e=i,x=Math[e(603)](this[e(727)][e(631)].x,this[e(727)].lookAtTargetSize.y,this[e(727)][e(631)].z),s=x/(2*Math.atan(Math.PI*this[e(534)][e(624)]/360)),a=s/this[e(534)][e(735)],n=t*Math[e(603)](s,a),o=this[e(727)][e(536)][e(458)]().sub(this.camera[e(770)])[e(490)]()[e(588)](n);return this.camera[e(770)].copy(this.activeSceneZone[e(536)]).sub(o),this[e(534)].lookAt(this[e(727)][e(536)]),this.camera[e(770)][e(792)](this[e(727)][e(536)])}[i(726)](t){const e=i;this[e(470)]=t,this.raycastManager[e(470)]=t,this[e(586)].enabled=t}[i(449)](t){const e=i;this.paused=t,this[e(470)]=!t,this[e(437)].enabled=!t}resetCamera(t=!![]){const e=i;this[e(470)]&&(this[e(682)](this[e(727)][e(613)],t),this.setLookAt(this[e(727)][e(613)],this[e(727)][e(536)],t),this[e(586)][e(782)](t))}[i(569)](t=.05){const e=i;this[e(586)][e(746)]=t*50}[i(685)](t,e=!![]){const x=i;this[x(586)][x(690)](t,e)}[i(463)](t,e,x=!![]){const s=i;return this[s(586)][s(463)](t.x,t.y,t.z,e.x,e.y,e.z,x)}[i(682)](t,e=!![]){const x=i;return this[x(586)][x(693)](t.x,t.y,t.z,!![])}[i(787)](t){const e=i;this[e(534)][e(414)]=t,this[e(534)][e(465)]()}orbitCameraTo(t,e,x,s=.04,a=!![]){const n=i;return t=t[n(764)](e)[n(583)](x)[n(671)](e),this[n(569)](s),this[n(586)][n(463)](t.x,t.y,t.z,e.x,e.y,e.z,a)}[i(712)](t){const e=i;t.object===null||!this.enabled||(this[e(437)][e(470)]=![],this[e(584)](t.object))}[i(700)](t){t.object!==null&&this.hoverOverCallback(t.object)}[i(587)](t){const e=i;t[e(523)]!==null&&this[e(655)](t.object)}[i(710)](){const t=i;if(this[t(586)].active||this[t(589)][t(443)])return;const e=this[t(586)].currentAction==32||this[t(586)].currentAction==1;let x=-1,s=1;!e&&(this.cameraParams[t(672)]&&this[t(437)][t(615)].x&&(this[t(793)].x=this[t(437)][t(615)].x+this[t(586)][t(555)],this.rotationTarget.y=-this[t(437)].pointer.y+this[t(586)][t(678)],this.rotationTarget.x=B[t(575)](this[t(793)].x,this.controls.azimuthAngle+x,this[t(586)][t(555)]+s,this[t(586)][t(805)],this[t(586)].maxAzimuthAngle),this[t(793)].y=B[t(575)](this[t(793)].y,this[t(586)][t(678)]+x,this[t(586)][t(678)]+s,this[t(586)][t(676)],this.controls[t(634)])),this[t(669)]&&this.cameraParams.gyro&&(this.rotationTarget.x=this[t(614)]+this[t(586)].azimuthAngle,this[t(793)].y=this[t(499)]+this[t(586)][t(678)]),this[t(586)][t(715)](this[t(793)].x,this.rotationTarget.y,![]))}update(t){const e=i;this[e(586)]!==null&&(this.raycastManager[e(788)]=t*1e3,!this[e(677)]&&(this[e(710)](),this[e(586)].update(t)))}}class W{constructor(t,e){const x=i;this.isOverlayActive=![],this.hiddenSelector=x(691),this.visibleSelector=x(757),this.contentContainer=document[x(516)](t),this[x(740)]=document[x(516)](e),!this[x(629)]&&console[x(549)](x(663),t,");  "),!this[x(740)]&&console[x(549)](x(431),e,x(444))}[i(723)](t,e=null){const x=i;this[x(425)]=t,t==!![]||this[x(740)][x(635)](),e!=null&&(this[x(740)][x(635)](),e())}pushHashURL(t="",e=!![]){const x=i;window[x(798)][x(541)]&&e?window[x(798)].pushState(null,null,t):location[x(646)]=t}[i(487)](t=!![]){const e=i;this[e(425)]=t,t?(this[e(629)][e(739)][e(671)](this[e(762)]),this.contentContainer[e(739)][e(635)](this[e(667)])):(this[e(629)].classList[e(671)](this[e(667)]),this[e(629)][e(739)].remove(this.visibleSelector),this.pushHashURL("",![]))}[i(491)](t){const e=i;this[e(629)].innerHTML=t}[i(703)](t){const e=i;let x=e(464);this[e(629)][e(427)](e(442),x),x=this.contentContainer[e(560)](e(474)),x[e(471)](e(808),()=>{this[e(487)](![]),t()})}[i(540)](t,e,x){const s=i;this[s(491)](t),this[s(703)](e),this[s(765)](x)}[i(781)](t){window[i(408)](t)}[i(532)](t){const e=i;this[e(629)][e(560)](e(612))&&(t(),this[e(629)][e(385)]="")}}class U{constructor(t){const e=i;let x=this,s=null,a,n,o,c,f,u,m=null,A,S;window[e(514)]=t.debug;async function V(){const r=e;s=new F(t[r(561)][r(535)],t[r(534)]),a=new q(d,t[r(534)]),n=new W(t.domElements[r(429)],t.domElements[r(496)]),n[r(723)](!![]);const h=s.getScene();m=s[r(520)]();const w=s[r(488)]();c=await new G(h,w,t[r(493)])[r(565)]((v,j,C)=>{const g=r;x.onProgressLoading&&x[g(753)](v,j,Math[g(705)](C))}),A=new d[r(704)],o=new d[r(400)](h);const p=c.getLoopingAnimations();return T(r(738),p,!![]),a[r(683)](w,m,c,Q,K,J),n[r(723)](![],L),Y(),z(),{camera:m,scene:h,renderer:w,sceneWrapper:c}}function Y(){const r=e;window[r(529)]=function(){const h=r;location[h(646)]==""?n[h(532)](L):window[h(798)][h(775)]&&window[h(798)][h(775)]()},window[r(471)](r(748),()=>{L()},![])}function z(){const r=e;requestAnimationFrame(z),!n[r(425)]&&(S=A.getDelta(),o[r(774)](S),a[r(774)](S),s[r(795)](),x[r(461)]&&x[r(461)](S))}function L(r=!![]){const h=e;s[h(782)](),a[h(728)](r)}async function T(r,h,w=![],M=![],p=null){function v(C){const g=_0x21f5;return Object[g(539)](C)[g(399)]===0}return v(h)===!![]||!(r in h)?void 0:N(h[r],p,w,M)}async function N(r,h=null,w=![],M=![]){const p=e;let v=0;for(let j=0;j<r[p(399)];j++){const C=r[j],g=o.clipAction(C,h);g[p(556)]=d[p(502)],g.stop(),g[p(782)](),g.zeroSlopeAtEnd=!![],g[p(686)]=!![],!w&&(g[p(810)](d[p(768)]),g.reset()),g[p(486)]=M,g[p(721)](),C[p(515)]>v&&(v=C[p(515)])}return new Promise(j=>setTimeout(()=>{j()},v*1e3))}function K(r){const h=e;r.raycastTarget==null||!a[h(470)]||(T(h(639),r[h(632)]),x[h(390)]!==null&&x[h(390)](r))}function J(r){const h=e;r[h(701)]!=null&&x[h(610)]!==null&&x[h(610)](r)}async function Q(r){const h=e;x.onPointerDownCallback!==null&&x.onPointerDownCallback(r),a[h(449)](!![]),o[h(790)]();const w=T(h(534),r[h(632)],![],![],m),M=T(h(525),r.animations,![],![]);await Promise[h(509)]([w,M]);const p=c[h(505)]();T(h(738),p,!![]),$(r),a.setPaused(![])}function $(r){const h=e;switch(f=r[h(441)].contentType,u=r[h(441)].content,f){case h(609):break;case"goToNextZone":a[h(684)](u);break;case h(432):a[h(573)](u);break;case h(607):n.setDynamicContent(u,L),n[h(487)]();break;case"link":n.openLink(u),L();break}u=null,f=null}x[e(573)]=function(r,h=.01){a[e(573)](r,h)},x[e(526)]=function(){a.nextScene()},x.setup=V,x.reset=L,x[e(393)]=null,x.onHoverOverCallback=null,x[e(610)]=null,x[e(461)]=null,x.onProgressLoading=null}}return U});
