(function(f,ke){typeof exports=="object"&&typeof module<"u"?module.exports=ke(require("three"),require("camera-controls")):typeof define=="function"&&define.amd?define(["three","camera-controls"],ke):(f=typeof globalThis<"u"?globalThis:f||self,f.XYZ3d=ke(f._0x2507e4,f._0x246fca))})(this,function(f,ke){"use strict";function fn(u){const e=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(u){for(const t in u)if(t!=="default"){const n=Object.getOwnPropertyDescriptor(u,t);Object.defineProperty(e,t,n.get?n:{enumerable:!0,get:()=>u[t]})}}return e.default=u,Object.freeze(e)}const Q=fn(f);function Pt(u,e){if(e===f.TrianglesDrawMode)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),u;if(e===f.TriangleFanDrawMode||e===f.TriangleStripDrawMode){let t=u.getIndex();if(t===null){const r=[],a=u.getAttribute("position");if(a!==void 0){for(let c=0;c<a.count;c++)r.push(c);u.setIndex(r),t=u.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),u}const n=t.count-2,s=[];if(e===f.TriangleFanDrawMode)for(let r=1;r<=n;r++)s.push(t.getX(0)),s.push(t.getX(r)),s.push(t.getX(r+1));else for(let r=0;r<n;r++)r%2===0?(s.push(t.getX(r)),s.push(t.getX(r+1)),s.push(t.getX(r+2))):(s.push(t.getX(r+2)),s.push(t.getX(r+1)),s.push(t.getX(r)));s.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const i=u.clone();return i.setIndex(s),i.clearGroups(),i}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),u}class dn extends f.Loader{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new Tn(t)}),this.register(function(t){return new vn(t)}),this.register(function(t){return new Rn(t)}),this.register(function(t){return new In(t)}),this.register(function(t){return new wn(t)}),this.register(function(t){return new yn(t)}),this.register(function(t){return new _n(t)}),this.register(function(t){return new En(t)}),this.register(function(t){return new bn(t)}),this.register(function(t){return new Sn(t)}),this.register(function(t){return new An(t)}),this.register(function(t){return new mn(t)}),this.register(function(t){return new Mn(t)}),this.register(function(t){return new Cn(t)})}load(e,t,n,s){const i=this;let r;this.resourcePath!==""?r=this.resourcePath:this.path!==""?r=this.path:r=f.LoaderUtils.extractUrlBase(e),this.manager.itemStart(e);const a=function(h){s?s(h):console.error(h),i.manager.itemError(e),i.manager.itemEnd(e)},c=new f.FileLoader(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(h){try{i.parse(h,r,function(p){t(p),i.manager.itemEnd(e)},a)}catch(p){a(p)}},n,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,s){let i;const r={},a={},c=new TextDecoder;if(typeof e=="string")i=JSON.parse(e);else if(e instanceof ArrayBuffer)if(c.decode(new Uint8Array(e,0,4))===Ht){try{r[J.KHR_BINARY_GLTF]=new Ln(e)}catch(d){s&&s(d);return}i=JSON.parse(r[J.KHR_BINARY_GLTF].content)}else i=JSON.parse(c.decode(e));else i=e;if(i.asset===void 0||i.asset.version[0]<2){s&&s(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const h=new jn(i,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});h.fileLoader.setRequestHeader(this.requestHeader);for(let p=0;p<this.pluginCallbacks.length;p++){const d=this.pluginCallbacks[p](h);a[d.name]=d,r[d.name]=!0}if(i.extensionsUsed)for(let p=0;p<i.extensionsUsed.length;++p){const d=i.extensionsUsed[p],g=i.extensionsRequired||[];switch(d){case J.KHR_MATERIALS_UNLIT:r[d]=new gn;break;case J.KHR_DRACO_MESH_COMPRESSION:r[d]=new Dn(i,this.dracoLoader);break;case J.KHR_TEXTURE_TRANSFORM:r[d]=new Nn;break;case J.KHR_MESH_QUANTIZATION:r[d]=new kn;break;default:g.indexOf(d)>=0&&a[d]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+d+'".')}}h.setExtensions(r),h.setPlugins(a),h.parse(n,s)}parseAsync(e,t){const n=this;return new Promise(function(s,i){n.parse(e,t,s,i)})}}function pn(){let u={};return{get:function(e){return u[e]},add:function(e,t){u[e]=t},remove:function(e){delete u[e]},removeAll:function(){u={}}}}const J={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class mn{constructor(e){this.parser=e,this.name=J.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,s=t.length;n<s;n++){const i=t[n];i.extensions&&i.extensions[this.name]&&i.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,i.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let s=t.cache.get(n);if(s)return s;const i=t.json,c=((i.extensions&&i.extensions[this.name]||{}).lights||[])[e];let h;const p=new f.Color(16777215);c.color!==void 0&&p.fromArray(c.color);const d=c.range!==void 0?c.range:0;switch(c.type){case"directional":h=new f.DirectionalLight(p),h.target.position.set(0,0,-1),h.add(h.target);break;case"point":h=new f.PointLight(p),h.distance=d;break;case"spot":h=new f.SpotLight(p),h.distance=d,c.spot=c.spot||{},c.spot.innerConeAngle=c.spot.innerConeAngle!==void 0?c.spot.innerConeAngle:0,c.spot.outerConeAngle=c.spot.outerConeAngle!==void 0?c.spot.outerConeAngle:Math.PI/4,h.angle=c.spot.outerConeAngle,h.penumbra=1-c.spot.innerConeAngle/c.spot.outerConeAngle,h.target.position.set(0,0,-1),h.add(h.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+c.type)}return h.position.set(0,0,0),h.decay=2,Fe(h,c),c.intensity!==void 0&&(h.intensity=c.intensity),h.name=t.createUniqueName(c.name||"light_"+e),s=Promise.resolve(h),t.cache.add(n,s),s}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,n=this.parser,i=n.json.nodes[e],a=(i.extensions&&i.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(c){return n._getNodeRef(t.cache,a,c)})}}class gn{constructor(){this.name=J.KHR_MATERIALS_UNLIT}getMaterialType(){return f.MeshBasicMaterial}extendParams(e,t,n){const s=[];e.color=new f.Color(1,1,1),e.opacity=1;const i=t.pbrMetallicRoughness;if(i){if(Array.isArray(i.baseColorFactor)){const r=i.baseColorFactor;e.color.fromArray(r),e.opacity=r[3]}i.baseColorTexture!==void 0&&s.push(n.assignTexture(e,"map",i.baseColorTexture,f.sRGBEncoding))}return Promise.all(s)}}class bn{constructor(e){this.parser=e,this.name=J.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const i=s.extensions[this.name].emissiveStrength;return i!==void 0&&(t.emissiveIntensity=i),Promise.resolve()}}class Tn{constructor(e){this.parser=e,this.name=J.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:f.MeshPhysicalMaterial}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const i=[],r=s.extensions[this.name];if(r.clearcoatFactor!==void 0&&(t.clearcoat=r.clearcoatFactor),r.clearcoatTexture!==void 0&&i.push(n.assignTexture(t,"clearcoatMap",r.clearcoatTexture)),r.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=r.clearcoatRoughnessFactor),r.clearcoatRoughnessTexture!==void 0&&i.push(n.assignTexture(t,"clearcoatRoughnessMap",r.clearcoatRoughnessTexture)),r.clearcoatNormalTexture!==void 0&&(i.push(n.assignTexture(t,"clearcoatNormalMap",r.clearcoatNormalTexture)),r.clearcoatNormalTexture.scale!==void 0)){const a=r.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new f.Vector2(a,a)}return Promise.all(i)}}class An{constructor(e){this.parser=e,this.name=J.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:f.MeshPhysicalMaterial}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const i=[],r=s.extensions[this.name];return r.iridescenceFactor!==void 0&&(t.iridescence=r.iridescenceFactor),r.iridescenceTexture!==void 0&&i.push(n.assignTexture(t,"iridescenceMap",r.iridescenceTexture)),r.iridescenceIor!==void 0&&(t.iridescenceIOR=r.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),r.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=r.iridescenceThicknessMinimum),r.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=r.iridescenceThicknessMaximum),r.iridescenceThicknessTexture!==void 0&&i.push(n.assignTexture(t,"iridescenceThicknessMap",r.iridescenceThicknessTexture)),Promise.all(i)}}class wn{constructor(e){this.parser=e,this.name=J.KHR_MATERIALS_SHEEN}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:f.MeshPhysicalMaterial}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const i=[];t.sheenColor=new f.Color(0,0,0),t.sheenRoughness=0,t.sheen=1;const r=s.extensions[this.name];return r.sheenColorFactor!==void 0&&t.sheenColor.fromArray(r.sheenColorFactor),r.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=r.sheenRoughnessFactor),r.sheenColorTexture!==void 0&&i.push(n.assignTexture(t,"sheenColorMap",r.sheenColorTexture,f.sRGBEncoding)),r.sheenRoughnessTexture!==void 0&&i.push(n.assignTexture(t,"sheenRoughnessMap",r.sheenRoughnessTexture)),Promise.all(i)}}class yn{constructor(e){this.parser=e,this.name=J.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:f.MeshPhysicalMaterial}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const i=[],r=s.extensions[this.name];return r.transmissionFactor!==void 0&&(t.transmission=r.transmissionFactor),r.transmissionTexture!==void 0&&i.push(n.assignTexture(t,"transmissionMap",r.transmissionTexture)),Promise.all(i)}}class _n{constructor(e){this.parser=e,this.name=J.KHR_MATERIALS_VOLUME}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:f.MeshPhysicalMaterial}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const i=[],r=s.extensions[this.name];t.thickness=r.thicknessFactor!==void 0?r.thicknessFactor:0,r.thicknessTexture!==void 0&&i.push(n.assignTexture(t,"thicknessMap",r.thicknessTexture)),t.attenuationDistance=r.attenuationDistance||1/0;const a=r.attenuationColor||[1,1,1];return t.attenuationColor=new f.Color(a[0],a[1],a[2]),Promise.all(i)}}class En{constructor(e){this.parser=e,this.name=J.KHR_MATERIALS_IOR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:f.MeshPhysicalMaterial}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const i=s.extensions[this.name];return t.ior=i.ior!==void 0?i.ior:1.5,Promise.resolve()}}class Sn{constructor(e){this.parser=e,this.name=J.KHR_MATERIALS_SPECULAR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:f.MeshPhysicalMaterial}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const i=[],r=s.extensions[this.name];t.specularIntensity=r.specularFactor!==void 0?r.specularFactor:1,r.specularTexture!==void 0&&i.push(n.assignTexture(t,"specularIntensityMap",r.specularTexture));const a=r.specularColorFactor||[1,1,1];return t.specularColor=new f.Color(a[0],a[1],a[2]),r.specularColorTexture!==void 0&&i.push(n.assignTexture(t,"specularColorMap",r.specularColorTexture,f.sRGBEncoding)),Promise.all(i)}}class vn{constructor(e){this.parser=e,this.name=J.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,s=n.textures[e];if(!s.extensions||!s.extensions[this.name])return null;const i=s.extensions[this.name],r=t.options.ktx2Loader;if(!r){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,i.source,r)}}class Rn{constructor(e){this.parser=e,this.name=J.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,s=n.json,i=s.textures[e];if(!i.extensions||!i.extensions[t])return null;const r=i.extensions[t],a=s.images[r.source];let c=n.textureLoader;if(a.uri){const h=n.options.manager.getHandler(a.uri);h!==null&&(c=h)}return this.detectSupport().then(function(h){if(h)return n.loadTextureImage(e,r.source,c);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class In{constructor(e){this.parser=e,this.name=J.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,s=n.json,i=s.textures[e];if(!i.extensions||!i.extensions[t])return null;const r=i.extensions[t],a=s.images[r.source];let c=n.textureLoader;if(a.uri){const h=n.options.manager.getHandler(a.uri);h!==null&&(c=h)}return this.detectSupport().then(function(h){if(h)return n.loadTextureImage(e,r.source,c);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class Mn{constructor(e){this.name=J.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const s=n.extensions[this.name],i=this.parser.getDependency("buffer",s.buffer),r=this.parser.options.meshoptDecoder;if(!r||!r.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return i.then(function(a){const c=s.byteOffset||0,h=s.byteLength||0,p=s.count,d=s.byteStride,g=new Uint8Array(a,c,h);return r.decodeGltfBufferAsync?r.decodeGltfBufferAsync(p,d,g,s.mode,s.filter).then(function(w){return w.buffer}):r.ready.then(function(){const w=new ArrayBuffer(p*d);return r.decodeGltfBuffer(new Uint8Array(w),p,d,g,s.mode,s.filter),w})})}else return null}}class Cn{constructor(e){this.name=J.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||n.mesh===void 0)return null;const s=t.meshes[n.mesh];for(const h of s.primitives)if(h.mode!==Ee.TRIANGLES&&h.mode!==Ee.TRIANGLE_STRIP&&h.mode!==Ee.TRIANGLE_FAN&&h.mode!==void 0)return null;const r=n.extensions[this.name].attributes,a=[],c={};for(const h in r)a.push(this.parser.getDependency("accessor",r[h]).then(p=>(c[h]=p,c[h])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(h=>{const p=h.pop(),d=p.isGroup?p.children:[p],g=h[0].count,w=[];for(const U of d){const H=new f.Matrix4,C=new f.Vector3,N=new f.Quaternion,j=new f.Vector3(1,1,1),I=new f.InstancedMesh(U.geometry,U.material,g);for(let D=0;D<g;D++)c.TRANSLATION&&C.fromBufferAttribute(c.TRANSLATION,D),c.ROTATION&&N.fromBufferAttribute(c.ROTATION,D),c.SCALE&&j.fromBufferAttribute(c.SCALE,D),I.setMatrixAt(D,H.compose(C,N,j));for(const D in c)D!=="TRANSLATION"&&D!=="ROTATION"&&D!=="SCALE"&&U.geometry.setAttribute(D,c[D]);f.Object3D.prototype.copy.call(I,U),I.frustumCulled=!1,this.parser.assignFinalMaterial(I),w.push(I)}return p.isGroup?(p.clear(),p.add(...w),p):w[0]}))}}const Ht="glTF",Ye=12,Gt={JSON:1313821514,BIN:5130562};class Ln{constructor(e){this.name=J.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,Ye),n=new TextDecoder;if(this.header={magic:n.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==Ht)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const s=this.header.length-Ye,i=new DataView(e,Ye);let r=0;for(;r<s;){const a=i.getUint32(r,!0);r+=4;const c=i.getUint32(r,!0);if(r+=4,c===Gt.JSON){const h=new Uint8Array(e,Ye+r,a);this.content=n.decode(h)}else if(c===Gt.BIN){const h=Ye+r;this.body=e.slice(h,h+a)}r+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Dn{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=J.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,s=this.dracoLoader,i=e.extensions[this.name].bufferView,r=e.extensions[this.name].attributes,a={},c={},h={};for(const p in r){const d=Mt[p]||p.toLowerCase();a[d]=r[p]}for(const p in e.attributes){const d=Mt[p]||p.toLowerCase();if(r[p]!==void 0){const g=n.accessors[e.attributes[p]],w=ze[g.componentType];h[d]=w.name,c[d]=g.normalized===!0}}return t.getDependency("bufferView",i).then(function(p){return new Promise(function(d){s.decodeDracoFile(p,function(g){for(const w in g.attributes){const U=g.attributes[w],H=c[w];H!==void 0&&(U.normalized=H)}d(g)},a,h)})})}}class Nn{constructor(){this.name=J.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return t.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class kn{constructor(){this.name=J.KHR_MESH_QUANTIZATION}}class zt extends f.Interpolant{constructor(e,t,n,s){super(e,t,n,s)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,s=this.valueSize,i=e*s*3+s;for(let r=0;r!==s;r++)t[r]=n[i+r];return t}interpolate_(e,t,n,s){const i=this.resultBuffer,r=this.sampleValues,a=this.valueSize,c=a*2,h=a*3,p=s-t,d=(n-t)/p,g=d*d,w=g*d,U=e*h,H=U-h,C=-2*w+3*g,N=w-g,j=1-C,I=N-g+d;for(let D=0;D!==a;D++){const Y=r[H+D+a],G=r[H+D+c]*p,Z=r[U+D+a],A=r[U+D]*p;i[D]=j*Y+I*G+C*Z+N*A}return i}}const On=new f.Quaternion;class Fn extends zt{interpolate_(e,t,n,s){const i=super.interpolate_(e,t,n,s);return On.fromArray(i).normalize().toArray(i),i}}const Ee={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},ze={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Zt={9728:f.NearestFilter,9729:f.LinearFilter,9984:f.NearestMipmapNearestFilter,9985:f.LinearMipmapNearestFilter,9986:f.NearestMipmapLinearFilter,9987:f.LinearMipmapLinearFilter},jt={33071:f.ClampToEdgeWrapping,33648:f.MirroredRepeatWrapping,10497:f.RepeatWrapping},It={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Mt={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Oe={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Un={CUBICSPLINE:void 0,LINEAR:f.InterpolateLinear,STEP:f.InterpolateDiscrete},Ct={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Bn(u){return u.DefaultMaterial===void 0&&(u.DefaultMaterial=new f.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:f.FrontSide})),u.DefaultMaterial}function Qe(u,e,t){for(const n in t.extensions)u[n]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[n]=t.extensions[n])}function Fe(u,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(u.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function Pn(u,e,t){let n=!1,s=!1,i=!1;for(let h=0,p=e.length;h<p;h++){const d=e[h];if(d.POSITION!==void 0&&(n=!0),d.NORMAL!==void 0&&(s=!0),d.COLOR_0!==void 0&&(i=!0),n&&s&&i)break}if(!n&&!s&&!i)return Promise.resolve(u);const r=[],a=[],c=[];for(let h=0,p=e.length;h<p;h++){const d=e[h];if(n){const g=d.POSITION!==void 0?t.getDependency("accessor",d.POSITION):u.attributes.position;r.push(g)}if(s){const g=d.NORMAL!==void 0?t.getDependency("accessor",d.NORMAL):u.attributes.normal;a.push(g)}if(i){const g=d.COLOR_0!==void 0?t.getDependency("accessor",d.COLOR_0):u.attributes.color;c.push(g)}}return Promise.all([Promise.all(r),Promise.all(a),Promise.all(c)]).then(function(h){const p=h[0],d=h[1],g=h[2];return n&&(u.morphAttributes.position=p),s&&(u.morphAttributes.normal=d),i&&(u.morphAttributes.color=g),u.morphTargetsRelative=!0,u})}function Hn(u,e){if(u.updateMorphTargets(),e.weights!==void 0)for(let t=0,n=e.weights.length;t<n;t++)u.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(u.morphTargetInfluences.length===t.length){u.morphTargetDictionary={};for(let n=0,s=t.length;n<s;n++)u.morphTargetDictionary[t[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Gn(u){const e=u.extensions&&u.extensions[J.KHR_DRACO_MESH_COMPRESSION];let t;return e?t="draco:"+e.bufferView+":"+e.indices+":"+Vt(e.attributes):t=u.indices+":"+Vt(u.attributes)+":"+u.mode,t}function Vt(u){let e="";const t=Object.keys(u).sort();for(let n=0,s=t.length;n<s;n++)e+=t[n]+":"+u[t[n]]+";";return e}function Lt(u){switch(u){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function zn(u){return u.search(/\.jpe?g($|\?)/i)>0||u.search(/^data\:image\/jpeg/)===0?"image/jpeg":u.search(/\.webp($|\?)/i)>0||u.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const Zn=new f.Matrix4;class jn{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new pn,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,s=!1,i=-1;typeof navigator<"u"&&(n=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,s=navigator.userAgent.indexOf("Firefox")>-1,i=s?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||n||s&&i<98?this.textureLoader=new f.TextureLoader(this.options.manager):this.textureLoader=new f.ImageBitmapLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new f.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,s=this.json,i=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(r){return r._markDefs&&r._markDefs()}),Promise.all(this._invokeAll(function(r){return r.beforeRoot&&r.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(r){const a={scene:r[0][s.scene||0],scenes:r[0],animations:r[1],cameras:r[2],asset:s.asset,parser:n,userData:{}};Qe(i,a,s),Fe(a,s),Promise.all(n._invokeAll(function(c){return c.afterRoot&&c.afterRoot(a)})).then(function(){e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let s=0,i=t.length;s<i;s++){const r=t[s].joints;for(let a=0,c=r.length;a<c;a++)e[r[a]].isBone=!0}for(let s=0,i=e.length;s<i;s++){const r=e[s];r.mesh!==void 0&&(this._addNodeRef(this.meshCache,r.mesh),r.skin!==void 0&&(n[r.mesh].isSkinnedMesh=!0)),r.camera!==void 0&&this._addNodeRef(this.cameraCache,r.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const s=n.clone(),i=(r,a)=>{const c=this.associations.get(r);c!=null&&this.associations.set(a,c);for(const[h,p]of r.children.entries())i(p,a.children[h])};return i(n,s),s.name+="_instance_"+e.uses[t]++,s}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const s=e(t[n]);if(s)return s}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let s=0;s<t.length;s++){const i=e(t[s]);i&&n.push(i)}return n}getDependency(e,t){const n=e+":"+t;let s=this.cache.get(n);if(!s){switch(e){case"scene":s=this.loadScene(t);break;case"node":s=this._invokeOne(function(i){return i.loadNode&&i.loadNode(t)});break;case"mesh":s=this._invokeOne(function(i){return i.loadMesh&&i.loadMesh(t)});break;case"accessor":s=this.loadAccessor(t);break;case"bufferView":s=this._invokeOne(function(i){return i.loadBufferView&&i.loadBufferView(t)});break;case"buffer":s=this.loadBuffer(t);break;case"material":s=this._invokeOne(function(i){return i.loadMaterial&&i.loadMaterial(t)});break;case"texture":s=this._invokeOne(function(i){return i.loadTexture&&i.loadTexture(t)});break;case"skin":s=this.loadSkin(t);break;case"animation":s=this._invokeOne(function(i){return i.loadAnimation&&i.loadAnimation(t)});break;case"camera":s=this.loadCamera(t);break;default:if(s=this._invokeOne(function(i){return i!=this&&i.getDependency&&i.getDependency(e,t)}),!s)throw new Error("Unknown type: "+e);break}this.cache.add(n,s)}return s}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,s=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(s.map(function(i,r){return n.getDependency(e,r)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[J.KHR_BINARY_GLTF].body);const s=this.options;return new Promise(function(i,r){n.load(f.LoaderUtils.resolveURL(t.uri,s.path),i,void 0,function(){r(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(n){const s=t.byteLength||0,i=t.byteOffset||0;return n.slice(i,i+s)})}loadAccessor(e){const t=this,n=this.json,s=this.json.accessors[e];if(s.bufferView===void 0&&s.sparse===void 0){const r=It[s.type],a=ze[s.componentType],c=s.normalized===!0,h=new a(s.count*r);return Promise.resolve(new f.BufferAttribute(h,r,c))}const i=[];return s.bufferView!==void 0?i.push(this.getDependency("bufferView",s.bufferView)):i.push(null),s.sparse!==void 0&&(i.push(this.getDependency("bufferView",s.sparse.indices.bufferView)),i.push(this.getDependency("bufferView",s.sparse.values.bufferView))),Promise.all(i).then(function(r){const a=r[0],c=It[s.type],h=ze[s.componentType],p=h.BYTES_PER_ELEMENT,d=p*c,g=s.byteOffset||0,w=s.bufferView!==void 0?n.bufferViews[s.bufferView].byteStride:void 0,U=s.normalized===!0;let H,C;if(w&&w!==d){const N=Math.floor(g/w),j="InterleavedBuffer:"+s.bufferView+":"+s.componentType+":"+N+":"+s.count;let I=t.cache.get(j);I||(H=new h(a,N*w,s.count*w/p),I=new f.InterleavedBuffer(H,w/p),t.cache.add(j,I)),C=new f.InterleavedBufferAttribute(I,c,g%w/p,U)}else a===null?H=new h(s.count*c):H=new h(a,g,s.count*c),C=new f.BufferAttribute(H,c,U);if(s.sparse!==void 0){const N=It.SCALAR,j=ze[s.sparse.indices.componentType],I=s.sparse.indices.byteOffset||0,D=s.sparse.values.byteOffset||0,Y=new j(r[1],I,s.sparse.count*N),G=new h(r[2],D,s.sparse.count*c);a!==null&&(C=new f.BufferAttribute(C.array.slice(),C.itemSize,C.normalized));for(let Z=0,A=Y.length;Z<A;Z++){const y=Y[Z];if(C.setX(y,G[Z*c]),c>=2&&C.setY(y,G[Z*c+1]),c>=3&&C.setZ(y,G[Z*c+2]),c>=4&&C.setW(y,G[Z*c+3]),c>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return C})}loadTexture(e){const t=this.json,n=this.options,i=t.textures[e].source,r=t.images[i];let a=this.textureLoader;if(r.uri){const c=n.manager.getHandler(r.uri);c!==null&&(a=c)}return this.loadTextureImage(e,i,a)}loadTextureImage(e,t,n){const s=this,i=this.json,r=i.textures[e],a=i.images[t],c=(a.uri||a.bufferView)+":"+r.sampler;if(this.textureCache[c])return this.textureCache[c];const h=this.loadImageSource(t,n).then(function(p){p.flipY=!1,p.name=r.name||a.name||"";const g=(i.samplers||{})[r.sampler]||{};return p.magFilter=Zt[g.magFilter]||f.LinearFilter,p.minFilter=Zt[g.minFilter]||f.LinearMipmapLinearFilter,p.wrapS=jt[g.wrapS]||f.RepeatWrapping,p.wrapT=jt[g.wrapT]||f.RepeatWrapping,s.associations.set(p,{textures:e}),p}).catch(function(){return null});return this.textureCache[c]=h,h}loadImageSource(e,t){const n=this,s=this.json,i=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(d=>d.clone());const r=s.images[e],a=self.URL||self.webkitURL;let c=r.uri||"",h=!1;if(r.bufferView!==void 0)c=n.getDependency("bufferView",r.bufferView).then(function(d){h=!0;const g=new Blob([d],{type:r.mimeType});return c=a.createObjectURL(g),c});else if(r.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const p=Promise.resolve(c).then(function(d){return new Promise(function(g,w){let U=g;t.isImageBitmapLoader===!0&&(U=function(H){const C=new f.Texture(H);C.needsUpdate=!0,g(C)}),t.load(f.LoaderUtils.resolveURL(d,i.path),U,void 0,w)})}).then(function(d){return h===!0&&a.revokeObjectURL(c),d.userData.mimeType=r.mimeType||zn(r.uri),d}).catch(function(d){throw console.error("THREE.GLTFLoader: Couldn't load texture",c),d});return this.sourceCache[e]=p,p}assignTexture(e,t,n,s){const i=this;return this.getDependency("texture",n.index).then(function(r){if(!r)return null;if(n.texCoord!==void 0&&n.texCoord!=0&&!(t==="aoMap"&&n.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+n.texCoord+" for texture "+t+" not yet supported."),i.extensions[J.KHR_TEXTURE_TRANSFORM]){const a=n.extensions!==void 0?n.extensions[J.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const c=i.associations.get(r);r=i.extensions[J.KHR_TEXTURE_TRANSFORM].extendTexture(r,a),i.associations.set(r,c)}}return s!==void 0&&(r.encoding=s),e[t]=r,r})}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const s=t.attributes.tangent===void 0,i=t.attributes.color!==void 0,r=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+n.uuid;let c=this.cache.get(a);c||(c=new f.PointsMaterial,f.Material.prototype.copy.call(c,n),c.color.copy(n.color),c.map=n.map,c.sizeAttenuation=!1,this.cache.add(a,c)),n=c}else if(e.isLine){const a="LineBasicMaterial:"+n.uuid;let c=this.cache.get(a);c||(c=new f.LineBasicMaterial,f.Material.prototype.copy.call(c,n),c.color.copy(n.color),this.cache.add(a,c)),n=c}if(s||i||r){let a="ClonedMaterial:"+n.uuid+":";s&&(a+="derivative-tangents:"),i&&(a+="vertex-colors:"),r&&(a+="flat-shading:");let c=this.cache.get(a);c||(c=n.clone(),i&&(c.vertexColors=!0),r&&(c.flatShading=!0),s&&(c.normalScale&&(c.normalScale.y*=-1),c.clearcoatNormalScale&&(c.clearcoatNormalScale.y*=-1)),this.cache.add(a,c),this.associations.set(c,this.associations.get(n))),n=c}n.aoMap&&t.attributes.uv2===void 0&&t.attributes.uv!==void 0&&t.setAttribute("uv2",t.attributes.uv),e.material=n}getMaterialType(){return f.MeshStandardMaterial}loadMaterial(e){const t=this,n=this.json,s=this.extensions,i=n.materials[e];let r;const a={},c=i.extensions||{},h=[];if(c[J.KHR_MATERIALS_UNLIT]){const d=s[J.KHR_MATERIALS_UNLIT];r=d.getMaterialType(),h.push(d.extendParams(a,i,t))}else{const d=i.pbrMetallicRoughness||{};if(a.color=new f.Color(1,1,1),a.opacity=1,Array.isArray(d.baseColorFactor)){const g=d.baseColorFactor;a.color.fromArray(g),a.opacity=g[3]}d.baseColorTexture!==void 0&&h.push(t.assignTexture(a,"map",d.baseColorTexture,f.sRGBEncoding)),a.metalness=d.metallicFactor!==void 0?d.metallicFactor:1,a.roughness=d.roughnessFactor!==void 0?d.roughnessFactor:1,d.metallicRoughnessTexture!==void 0&&(h.push(t.assignTexture(a,"metalnessMap",d.metallicRoughnessTexture)),h.push(t.assignTexture(a,"roughnessMap",d.metallicRoughnessTexture))),r=this._invokeOne(function(g){return g.getMaterialType&&g.getMaterialType(e)}),h.push(Promise.all(this._invokeAll(function(g){return g.extendMaterialParams&&g.extendMaterialParams(e,a)})))}i.doubleSided===!0&&(a.side=f.DoubleSide);const p=i.alphaMode||Ct.OPAQUE;if(p===Ct.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,p===Ct.MASK&&(a.alphaTest=i.alphaCutoff!==void 0?i.alphaCutoff:.5)),i.normalTexture!==void 0&&r!==f.MeshBasicMaterial&&(h.push(t.assignTexture(a,"normalMap",i.normalTexture)),a.normalScale=new f.Vector2(1,1),i.normalTexture.scale!==void 0)){const d=i.normalTexture.scale;a.normalScale.set(d,d)}return i.occlusionTexture!==void 0&&r!==f.MeshBasicMaterial&&(h.push(t.assignTexture(a,"aoMap",i.occlusionTexture)),i.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=i.occlusionTexture.strength)),i.emissiveFactor!==void 0&&r!==f.MeshBasicMaterial&&(a.emissive=new f.Color().fromArray(i.emissiveFactor)),i.emissiveTexture!==void 0&&r!==f.MeshBasicMaterial&&h.push(t.assignTexture(a,"emissiveMap",i.emissiveTexture,f.sRGBEncoding)),Promise.all(h).then(function(){const d=new r(a);return i.name&&(d.name=i.name),Fe(d,i),t.associations.set(d,{materials:e}),i.extensions&&Qe(s,d,i),d})}createUniqueName(e){const t=f.PropertyBinding.sanitizeNodeName(e||"");let n=t;for(let s=1;this.nodeNamesUsed[n];++s)n=t+"_"+s;return this.nodeNamesUsed[n]=!0,n}loadGeometries(e){const t=this,n=this.extensions,s=this.primitiveCache;function i(a){return n[J.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(c){return Kt(c,a,t)})}const r=[];for(let a=0,c=e.length;a<c;a++){const h=e[a],p=Gn(h),d=s[p];if(d)r.push(d.promise);else{let g;h.extensions&&h.extensions[J.KHR_DRACO_MESH_COMPRESSION]?g=i(h):g=Kt(new f.BufferGeometry,h,t),s[p]={primitive:h,promise:g},r.push(g)}}return Promise.all(r)}loadMesh(e){const t=this,n=this.json,s=this.extensions,i=n.meshes[e],r=i.primitives,a=[];for(let c=0,h=r.length;c<h;c++){const p=r[c].material===void 0?Bn(this.cache):this.getDependency("material",r[c].material);a.push(p)}return a.push(t.loadGeometries(r)),Promise.all(a).then(function(c){const h=c.slice(0,c.length-1),p=c[c.length-1],d=[];for(let w=0,U=p.length;w<U;w++){const H=p[w],C=r[w];let N;const j=h[w];if(C.mode===Ee.TRIANGLES||C.mode===Ee.TRIANGLE_STRIP||C.mode===Ee.TRIANGLE_FAN||C.mode===void 0)N=i.isSkinnedMesh===!0?new f.SkinnedMesh(H,j):new f.Mesh(H,j),N.isSkinnedMesh===!0&&N.normalizeSkinWeights(),C.mode===Ee.TRIANGLE_STRIP?N.geometry=Pt(N.geometry,f.TriangleStripDrawMode):C.mode===Ee.TRIANGLE_FAN&&(N.geometry=Pt(N.geometry,f.TriangleFanDrawMode));else if(C.mode===Ee.LINES)N=new f.LineSegments(H,j);else if(C.mode===Ee.LINE_STRIP)N=new f.Line(H,j);else if(C.mode===Ee.LINE_LOOP)N=new f.LineLoop(H,j);else if(C.mode===Ee.POINTS)N=new f.Points(H,j);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+C.mode);Object.keys(N.geometry.morphAttributes).length>0&&Hn(N,i),N.name=t.createUniqueName(i.name||"mesh_"+e),Fe(N,i),C.extensions&&Qe(s,N,C),t.assignFinalMaterial(N),d.push(N)}for(let w=0,U=d.length;w<U;w++)t.associations.set(d[w],{meshes:e,primitives:w});if(d.length===1)return d[0];const g=new f.Group;t.associations.set(g,{meshes:e});for(let w=0,U=d.length;w<U;w++)g.add(d[w]);return g})}loadCamera(e){let t;const n=this.json.cameras[e],s=n[n.type];if(!s){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return n.type==="perspective"?t=new f.PerspectiveCamera(f.MathUtils.radToDeg(s.yfov),s.aspectRatio||1,s.znear||1,s.zfar||2e6):n.type==="orthographic"&&(t=new f.OrthographicCamera(-s.xmag,s.xmag,s.ymag,-s.ymag,s.znear,s.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),Fe(t,n),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],n=[];for(let s=0,i=t.joints.length;s<i;s++)n.push(this._loadNodeShallow(t.joints[s]));return t.inverseBindMatrices!==void 0?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(s){const i=s.pop(),r=s,a=[],c=[];for(let h=0,p=r.length;h<p;h++){const d=r[h];if(d){a.push(d);const g=new f.Matrix4;i!==null&&g.fromArray(i.array,h*16),c.push(g)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[h])}return new f.Skeleton(a,c)})}loadAnimation(e){const n=this.json.animations[e],s=[],i=[],r=[],a=[],c=[];for(let h=0,p=n.channels.length;h<p;h++){const d=n.channels[h],g=n.samplers[d.sampler],w=d.target,U=w.node,H=n.parameters!==void 0?n.parameters[g.input]:g.input,C=n.parameters!==void 0?n.parameters[g.output]:g.output;s.push(this.getDependency("node",U)),i.push(this.getDependency("accessor",H)),r.push(this.getDependency("accessor",C)),a.push(g),c.push(w)}return Promise.all([Promise.all(s),Promise.all(i),Promise.all(r),Promise.all(a),Promise.all(c)]).then(function(h){const p=h[0],d=h[1],g=h[2],w=h[3],U=h[4],H=[];for(let N=0,j=p.length;N<j;N++){const I=p[N],D=d[N],Y=g[N],G=w[N],Z=U[N];if(I===void 0)continue;I.updateMatrix();let A;switch(Oe[Z.path]){case Oe.weights:A=f.NumberKeyframeTrack;break;case Oe.rotation:A=f.QuaternionKeyframeTrack;break;case Oe.position:case Oe.scale:default:A=f.VectorKeyframeTrack;break}const y=I.name?I.name:I.uuid,K=G.interpolation!==void 0?Un[G.interpolation]:f.InterpolateLinear,B=[];Oe[Z.path]===Oe.weights?I.traverse(function(ne){ne.morphTargetInfluences&&B.push(ne.name?ne.name:ne.uuid)}):B.push(y);let z=Y.array;if(Y.normalized){const ne=Lt(z.constructor),ie=new Float32Array(z.length);for(let se=0,re=z.length;se<re;se++)ie[se]=z[se]*ne;z=ie}for(let ne=0,ie=B.length;ne<ie;ne++){const se=new A(B[ne]+"."+Oe[Z.path],D.array,z,K);G.interpolation==="CUBICSPLINE"&&(se.createInterpolant=function(pe){const me=this instanceof f.QuaternionKeyframeTrack?Fn:zt;return new me(this.times,this.values,this.getValueSize()/3,pe)},se.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),H.push(se)}}const C=n.name?n.name:"animation_"+e;return new f.AnimationClip(C,void 0,H)})}createNodeMesh(e){const t=this.json,n=this,s=t.nodes[e];return s.mesh===void 0?null:n.getDependency("mesh",s.mesh).then(function(i){const r=n._getNodeRef(n.meshCache,s.mesh,i);return s.weights!==void 0&&r.traverse(function(a){if(a.isMesh)for(let c=0,h=s.weights.length;c<h;c++)a.morphTargetInfluences[c]=s.weights[c]}),r})}loadNode(e){const t=this.json,n=this,s=t.nodes[e],i=n._loadNodeShallow(e),r=[],a=s.children||[];for(let h=0,p=a.length;h<p;h++)r.push(n.getDependency("node",a[h]));const c=s.skin===void 0?Promise.resolve(null):n.getDependency("skin",s.skin);return Promise.all([i,Promise.all(r),c]).then(function(h){const p=h[0],d=h[1],g=h[2];g!==null&&p.traverse(function(w){w.isSkinnedMesh&&w.bind(g,Zn)});for(let w=0,U=d.length;w<U;w++)p.add(d[w]);return p})}_loadNodeShallow(e){const t=this.json,n=this.extensions,s=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const i=t.nodes[e],r=i.name?s.createUniqueName(i.name):"",a=[],c=s._invokeOne(function(h){return h.createNodeMesh&&h.createNodeMesh(e)});return c&&a.push(c),i.camera!==void 0&&a.push(s.getDependency("camera",i.camera).then(function(h){return s._getNodeRef(s.cameraCache,i.camera,h)})),s._invokeAll(function(h){return h.createNodeAttachment&&h.createNodeAttachment(e)}).forEach(function(h){a.push(h)}),this.nodeCache[e]=Promise.all(a).then(function(h){let p;if(i.isBone===!0?p=new f.Bone:h.length>1?p=new f.Group:h.length===1?p=h[0]:p=new f.Object3D,p!==h[0])for(let d=0,g=h.length;d<g;d++)p.add(h[d]);if(i.name&&(p.userData.name=i.name,p.name=r),Fe(p,i),i.extensions&&Qe(n,p,i),i.matrix!==void 0){const d=new f.Matrix4;d.fromArray(i.matrix),p.applyMatrix4(d)}else i.translation!==void 0&&p.position.fromArray(i.translation),i.rotation!==void 0&&p.quaternion.fromArray(i.rotation),i.scale!==void 0&&p.scale.fromArray(i.scale);return s.associations.has(p)||s.associations.set(p,{}),s.associations.get(p).nodes=e,p}),this.nodeCache[e]}loadScene(e){const t=this.extensions,n=this.json.scenes[e],s=this,i=new f.Group;n.name&&(i.name=s.createUniqueName(n.name)),Fe(i,n),n.extensions&&Qe(t,i,n);const r=n.nodes||[],a=[];for(let c=0,h=r.length;c<h;c++)a.push(s.getDependency("node",r[c]));return Promise.all(a).then(function(c){for(let p=0,d=c.length;p<d;p++)i.add(c[p]);const h=p=>{const d=new Map;for(const[g,w]of s.associations)(g instanceof f.Material||g instanceof f.Texture)&&d.set(g,w);return p.traverse(g=>{const w=s.associations.get(g);w!=null&&d.set(g,w)}),d};return s.associations=h(i),i})}}function Vn(u,e,t){const n=e.attributes,s=new f.Box3;if(n.POSITION!==void 0){const a=t.json.accessors[n.POSITION],c=a.min,h=a.max;if(c!==void 0&&h!==void 0){if(s.set(new f.Vector3(c[0],c[1],c[2]),new f.Vector3(h[0],h[1],h[2])),a.normalized){const p=Lt(ze[a.componentType]);s.min.multiplyScalar(p),s.max.multiplyScalar(p)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const i=e.targets;if(i!==void 0){const a=new f.Vector3,c=new f.Vector3;for(let h=0,p=i.length;h<p;h++){const d=i[h];if(d.POSITION!==void 0){const g=t.json.accessors[d.POSITION],w=g.min,U=g.max;if(w!==void 0&&U!==void 0){if(c.setX(Math.max(Math.abs(w[0]),Math.abs(U[0]))),c.setY(Math.max(Math.abs(w[1]),Math.abs(U[1]))),c.setZ(Math.max(Math.abs(w[2]),Math.abs(U[2]))),g.normalized){const H=Lt(ze[g.componentType]);c.multiplyScalar(H)}a.max(c)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}s.expandByVector(a)}u.boundingBox=s;const r=new f.Sphere;s.getCenter(r.center),r.radius=s.min.distanceTo(s.max)/2,u.boundingSphere=r}function Kt(u,e,t){const n=e.attributes,s=[];function i(r,a){return t.getDependency("accessor",r).then(function(c){u.setAttribute(a,c)})}for(const r in n){const a=Mt[r]||r.toLowerCase();a in u.attributes||s.push(i(n[r],a))}if(e.indices!==void 0&&!u.index){const r=t.getDependency("accessor",e.indices).then(function(a){u.setIndex(a)});s.push(r)}return Fe(u,e),Vn(u,e,t),Promise.all(s).then(function(){return e.targets!==void 0?Pn(u,e.targets,t):u})}const Dt=new WeakMap;class Kn extends f.Loader{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,n,s){const i=new f.FileLoader(this.manager);i.setPath(this.path),i.setResponseType("arraybuffer"),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(e,r=>{this.parse(r,t,s)},n,s)}parse(e,t,n){this.decodeDracoFile(e,t,null,null,f.SRGBColorSpace).catch(n)}decodeDracoFile(e,t,n,s,i=f.LinearSRGBColorSpace){const r={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:s||this.defaultAttributeTypes,useUniqueIDs:!!n,vertexColorSpace:i};return this.decodeGeometry(e,r).then(t)}decodeGeometry(e,t){const n=JSON.stringify(t);if(Dt.has(e)){const c=Dt.get(e);if(c.key===n)return c.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let s;const i=this.workerNextTaskID++,r=e.byteLength,a=this._getWorker(i,r).then(c=>(s=c,new Promise((h,p)=>{s._callbacks[i]={resolve:h,reject:p},s.postMessage({type:"decode",id:i,taskConfig:t,buffer:e},[e])}))).then(c=>this._createGeometry(c.geometry));return a.catch(()=>!0).then(()=>{s&&i&&this._releaseTask(s,i)}),Dt.set(e,{key:n,promise:a}),a}_createGeometry(e){const t=new f.BufferGeometry;e.index&&t.setIndex(new f.BufferAttribute(e.index.array,1));for(let n=0;n<e.attributes.length;n++){const s=e.attributes[n],i=s.name,r=s.array,a=s.itemSize,c=new f.BufferAttribute(r,a);i==="color"&&this._assignVertexColorSpace(c,s.vertexColorSpace),t.setAttribute(i,c)}return t}_assignVertexColorSpace(e,t){if(t!==f.SRGBColorSpace)return;const n=new f.Color;for(let s=0,i=e.count;s<i;s++)n.fromBufferAttribute(e,s).convertSRGBToLinear(),e.setXYZ(s,n.r,n.g,n.b)}_loadLibrary(e,t){const n=new f.FileLoader(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise((s,i)=>{n.load(e,s,void 0,i)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(n=>{const s=n[0];e||(this.decoderConfig.wasmBinary=n[1]);const i=Xn.toString(),r=["/* draco decoder */",s,"","/* worker */",i.substring(i.indexOf("{")+1,i.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([r]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const s=new Worker(this.workerSourceURL);s._callbacks={},s._taskCosts={},s._taskLoad=0,s.postMessage({type:"init",decoderConfig:this.decoderConfig}),s.onmessage=function(i){const r=i.data;switch(r.type){case"decode":s._callbacks[r.id].resolve(r);break;case"error":s._callbacks[r.id].reject(r);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+r.type+'"')}},this.workerPool.push(s)}else this.workerPool.sort(function(s,i){return s._taskLoad>i._taskLoad?-1:1});const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[e]=t,n._taskLoad+=t,n})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}}function Xn(){let u,e;onmessage=function(r){const a=r.data;switch(a.type){case"init":u=a.decoderConfig,e=new Promise(function(p){u.onModuleLoaded=function(d){p({draco:d})},DracoDecoderModule(u)});break;case"decode":const c=a.buffer,h=a.taskConfig;e.then(p=>{const d=p.draco,g=new d.Decoder;try{const w=t(d,g,new Int8Array(c),h),U=w.attributes.map(H=>H.array.buffer);w.index&&U.push(w.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:w},U)}catch(w){console.error(w),self.postMessage({type:"error",id:a.id,error:w.message})}finally{d.destroy(g)}});break}};function t(r,a,c,h){const p=h.attributeIDs,d=h.attributeTypes;let g,w;const U=a.GetEncodedGeometryType(c);if(U===r.TRIANGULAR_MESH)g=new r.Mesh,w=a.DecodeArrayToMesh(c,c.byteLength,g);else if(U===r.POINT_CLOUD)g=new r.PointCloud,w=a.DecodeArrayToPointCloud(c,c.byteLength,g);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!w.ok()||g.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+w.error_msg());const H={index:null,attributes:[]};for(const C in p){const N=self[d[C]];let j,I;if(h.useUniqueIDs)I=p[C],j=a.GetAttributeByUniqueId(g,I);else{if(I=a.GetAttributeId(g,r[p[C]]),I===-1)continue;j=a.GetAttribute(g,I)}const D=s(r,a,g,C,N,j);C==="color"&&(D.vertexColorSpace=h.vertexColorSpace),H.attributes.push(D)}return U===r.TRIANGULAR_MESH&&(H.index=n(r,a,g)),r.destroy(g),H}function n(r,a,c){const p=c.num_faces()*3,d=p*4,g=r._malloc(d);a.GetTrianglesUInt32Array(c,d,g);const w=new Uint32Array(r.HEAPF32.buffer,g,p).slice();return r._free(g),{array:w,itemSize:1}}function s(r,a,c,h,p,d){const g=d.num_components(),U=c.num_points()*g,H=U*p.BYTES_PER_ELEMENT,C=i(r,p),N=r._malloc(H);a.GetAttributeDataArrayForAllPoints(c,d,C,H,N);const j=new p(r.HEAPF32.buffer,N,U).slice();return r._free(N),{name:h,array:j,itemSize:g}}function i(r,a){switch(a){case Float32Array:return r.DT_FLOAT32;case Int8Array:return r.DT_INT8;case Int16Array:return r.DT_INT16;case Int32Array:return r.DT_INT32;case Uint8Array:return r.DT_UINT8;case Uint16Array:return r.DT_UINT16;case Uint32Array:return r.DT_UINT32}}}class Wn extends f.DataTextureLoader{constructor(e){super(e),this.type=f.HalfFloatType}parse(e){const a=function(I,D){switch(I){case 1:console.error("THREE.RGBELoader Read Error: "+(D||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(D||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(D||""));break;default:case 4:console.error("THREE.RGBELoader: Error: "+(D||""))}return-1},d=`
`,g=function(I,D,Y){D=D||1024;let Z=I.pos,A=-1,y=0,K="",B=String.fromCharCode.apply(null,new Uint16Array(I.subarray(Z,Z+128)));for(;0>(A=B.indexOf(d))&&y<D&&Z<I.byteLength;)K+=B,y+=B.length,Z+=128,B+=String.fromCharCode.apply(null,new Uint16Array(I.subarray(Z,Z+128)));return-1<A?(Y!==!1&&(I.pos+=y+A+1),K+B.slice(0,A)):!1},w=function(I){const D=/^#\?(\S+)/,Y=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,G=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,Z=/^\s*FORMAT=(\S+)\s*$/,A=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,y={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let K,B;if(I.pos>=I.byteLength||!(K=g(I)))return a(1,"no header found");if(!(B=K.match(D)))return a(3,"bad initial token");for(y.valid|=1,y.programtype=B[1],y.string+=K+`
`;K=g(I),K!==!1;){if(y.string+=K+`
`,K.charAt(0)==="#"){y.comments+=K+`
`;continue}if((B=K.match(Y))&&(y.gamma=parseFloat(B[1])),(B=K.match(G))&&(y.exposure=parseFloat(B[1])),(B=K.match(Z))&&(y.valid|=2,y.format=B[1]),(B=K.match(A))&&(y.valid|=4,y.height=parseInt(B[1],10),y.width=parseInt(B[2],10)),y.valid&2&&y.valid&4)break}return y.valid&2?y.valid&4?y:a(3,"missing image size specifier"):a(3,"missing format specifier")},U=function(I,D,Y){const G=D;if(G<8||G>32767||I[0]!==2||I[1]!==2||I[2]&128)return new Uint8Array(I);if(G!==(I[2]<<8|I[3]))return a(3,"wrong scanline width");const Z=new Uint8Array(4*D*Y);if(!Z.length)return a(4,"unable to allocate buffer space");let A=0,y=0;const K=4*G,B=new Uint8Array(4),z=new Uint8Array(K);let ne=Y;for(;ne>0&&y<I.byteLength;){if(y+4>I.byteLength)return a(1);if(B[0]=I[y++],B[1]=I[y++],B[2]=I[y++],B[3]=I[y++],B[0]!=2||B[1]!=2||(B[2]<<8|B[3])!=G)return a(3,"bad rgbe scanline format");let ie=0,se;for(;ie<K&&y<I.byteLength;){se=I[y++];const pe=se>128;if(pe&&(se-=128),se===0||ie+se>K)return a(3,"bad scanline data");if(pe){const me=I[y++];for(let Pe=0;Pe<se;Pe++)z[ie++]=me}else z.set(I.subarray(y,y+se),ie),ie+=se,y+=se}const re=G;for(let pe=0;pe<re;pe++){let me=0;Z[A]=z[pe+me],me+=G,Z[A+1]=z[pe+me],me+=G,Z[A+2]=z[pe+me],me+=G,Z[A+3]=z[pe+me],A+=4}ne--}return Z},H=function(I,D,Y,G){const Z=I[D+3],A=Math.pow(2,Z-128)/255;Y[G+0]=I[D+0]*A,Y[G+1]=I[D+1]*A,Y[G+2]=I[D+2]*A,Y[G+3]=1},C=function(I,D,Y,G){const Z=I[D+3],A=Math.pow(2,Z-128)/255;Y[G+0]=f.DataUtils.toHalfFloat(Math.min(I[D+0]*A,65504)),Y[G+1]=f.DataUtils.toHalfFloat(Math.min(I[D+1]*A,65504)),Y[G+2]=f.DataUtils.toHalfFloat(Math.min(I[D+2]*A,65504)),Y[G+3]=f.DataUtils.toHalfFloat(1)},N=new Uint8Array(e);N.pos=0;const j=w(N);if(j!==-1){const I=j.width,D=j.height,Y=U(N.subarray(N.pos),I,D);if(Y!==-1){let G,Z,A;switch(this.type){case f.FloatType:A=Y.length/4;const y=new Float32Array(A*4);for(let B=0;B<A;B++)H(Y,B*4,y,B*4);G=y,Z=f.FloatType;break;case f.HalfFloatType:A=Y.length/4;const K=new Uint16Array(A*4);for(let B=0;B<A;B++)C(Y,B*4,K,B*4);G=K,Z=f.HalfFloatType;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type);break}return{width:I,height:D,data:G,header:j.string,gamma:j.gamma,exposure:j.exposure,type:Z}}}return null}setDataType(e){return this.type=e,this}load(e,t,n,s){function i(r,a){switch(r.type){case f.FloatType:case f.HalfFloatType:r.encoding=f.LinearEncoding,r.minFilter=f.LinearFilter,r.magFilter=f.LinearFilter,r.generateMipmaps=!1,r.flipY=!0;break}t&&t(r,a)}return super.load(e,i,n,s)}}/*!
fflate - fast JavaScript compression/decompression
<https://101arrowz.github.io/fflate>
Licensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE
version 0.6.9
*/var Xt=function(u){return URL.createObjectURL(new Blob([u],{type:"text/javascript"}))};try{URL.revokeObjectURL(Xt(""))}catch{Xt=function(e){return"data:application/javascript;charset=UTF-8,"+encodeURI(e)}}var Se=Uint8Array,Ue=Uint16Array,Nt=Uint32Array,Wt=new Se([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Yt=new Se([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Yn=new Se([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Qt=function(u,e){for(var t=new Ue(31),n=0;n<31;++n)t[n]=e+=1<<u[n-1];for(var s=new Nt(t[30]),n=1;n<30;++n)for(var i=t[n];i<t[n+1];++i)s[i]=i-t[n]<<5|n;return[t,s]},qt=Qt(Wt,2),Jt=qt[0],Qn=qt[1];Jt[28]=258,Qn[258]=28;for(var qn=Qt(Yt,0),Jn=qn[0],kt=new Ue(32768),le=0;le<32768;++le){var Be=(le&43690)>>>1|(le&21845)<<1;Be=(Be&52428)>>>2|(Be&13107)<<2,Be=(Be&61680)>>>4|(Be&3855)<<4,kt[le]=((Be&65280)>>>8|(Be&255)<<8)>>>1}for(var qe=function(u,e,t){for(var n=u.length,s=0,i=new Ue(e);s<n;++s)++i[u[s]-1];var r=new Ue(e);for(s=0;s<e;++s)r[s]=r[s-1]+i[s-1]<<1;var a;if(t){a=new Ue(1<<e);var c=15-e;for(s=0;s<n;++s)if(u[s])for(var h=s<<4|u[s],p=e-u[s],d=r[u[s]-1]++<<p,g=d|(1<<p)-1;d<=g;++d)a[kt[d]>>>c]=h}else for(a=new Ue(n),s=0;s<n;++s)u[s]&&(a[s]=kt[r[u[s]-1]++]>>>15-u[s]);return a},Je=new Se(288),le=0;le<144;++le)Je[le]=8;for(var le=144;le<256;++le)Je[le]=9;for(var le=256;le<280;++le)Je[le]=7;for(var le=280;le<288;++le)Je[le]=8;for(var $t=new Se(32),le=0;le<32;++le)$t[le]=5;var $n=qe(Je,9,1),es=qe($t,5,1),Ot=function(u){for(var e=u[0],t=1;t<u.length;++t)u[t]>e&&(e=u[t]);return e},Me=function(u,e,t){var n=e/8|0;return(u[n]|u[n+1]<<8)>>(e&7)&t},Ft=function(u,e){var t=e/8|0;return(u[t]|u[t+1]<<8|u[t+2]<<16)>>(e&7)},ts=function(u){return(u/8|0)+(u&7&&1)},ns=function(u,e,t){(e==null||e<0)&&(e=0),(t==null||t>u.length)&&(t=u.length);var n=new(u instanceof Ue?Ue:u instanceof Nt?Nt:Se)(t-e);return n.set(u.subarray(e,t)),n},ss=function(u,e,t){var n=u.length;if(!n||t&&!t.l&&n<5)return e||new Se(0);var s=!e||t,i=!t||t.i;t||(t={}),e||(e=new Se(n*3));var r=function(ae){var Le=e.length;if(ae>Le){var De=new Se(Math.max(Le*2,ae));De.set(e),e=De}},a=t.f||0,c=t.p||0,h=t.b||0,p=t.l,d=t.d,g=t.m,w=t.n,U=n*8;do{if(!p){t.f=a=Me(u,c,1);var H=Me(u,c+1,3);if(c+=3,H)if(H==1)p=$n,d=es,g=9,w=5;else if(H==2){var I=Me(u,c,31)+257,D=Me(u,c+10,15)+4,Y=I+Me(u,c+5,31)+1;c+=14;for(var G=new Se(Y),Z=new Se(19),A=0;A<D;++A)Z[Yn[A]]=Me(u,c+A*3,7);c+=D*3;for(var y=Ot(Z),K=(1<<y)-1,B=qe(Z,y,1),A=0;A<Y;){var z=B[Me(u,c,K)];c+=z&15;var C=z>>>4;if(C<16)G[A++]=C;else{var ne=0,ie=0;for(C==16?(ie=3+Me(u,c,3),c+=2,ne=G[A-1]):C==17?(ie=3+Me(u,c,7),c+=3):C==18&&(ie=11+Me(u,c,127),c+=7);ie--;)G[A++]=ne}}var se=G.subarray(0,I),re=G.subarray(I);g=Ot(se),w=Ot(re),p=qe(se,g,1),d=qe(re,w,1)}else throw"invalid block type";else{var C=ts(c)+4,N=u[C-4]|u[C-3]<<8,j=C+N;if(j>n){if(i)throw"unexpected EOF";break}s&&r(h+N),e.set(u.subarray(C,j),h),t.b=h+=N,t.p=c=j*8;continue}if(c>U){if(i)throw"unexpected EOF";break}}s&&r(h+131072);for(var pe=(1<<g)-1,me=(1<<w)-1,Pe=c;;Pe=c){var ne=p[Ft(u,c)&pe],Te=ne>>>4;if(c+=ne&15,c>U){if(i)throw"unexpected EOF";break}if(!ne)throw"invalid length/literal";if(Te<256)e[h++]=Te;else if(Te==256){Pe=c,p=null;break}else{var Xe=Te-254;if(Te>264){var A=Te-257,we=Wt[A];Xe=Me(u,c,(1<<we)-1)+Jt[A],c+=we}var He=d[Ft(u,c)&me],Ge=He>>>4;if(!He)throw"invalid distance";c+=He&15;var re=Jn[Ge];if(Ge>3){var we=Yt[Ge];re+=Ft(u,c)&(1<<we)-1,c+=we}if(c>U){if(i)throw"unexpected EOF";break}s&&r(h+131072);for(var it=h+Xe;h<it;h+=4)e[h]=e[h-re],e[h+1]=e[h+1-re],e[h+2]=e[h+2-re],e[h+3]=e[h+3-re];h=it}}t.l=p,t.p=Pe,t.b=h,p&&(a=1,t.m=g,t.d=d,t.n=w)}while(!a);return h==e.length?e:ns(e,0,h)},rs=new Se(0),is=function(u){if((u[0]&15)!=8||u[0]>>>4>7||(u[0]<<8|u[1])%31)throw"invalid zlib data";if(u[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function ut(u,e){return ss((is(u),u.subarray(2,-4)),e)}var os=typeof TextDecoder<"u"&&new TextDecoder,as=0;try{os.decode(rs,{stream:!0}),as=1}catch{}class cs extends f.DataTextureLoader{constructor(e){super(e),this.type=f.HalfFloatType}parse(e){const y=Math.pow(2.7182818,2.2);function K(o,l){let x=0;for(let T=0;T<65536;++T)(T==0||o[T>>3]&1<<(T&7))&&(l[x++]=T);const m=x-1;for(;x<65536;)l[x++]=0;return m}function B(o){for(let l=0;l<16384;l++)o[l]={},o[l].len=0,o[l].lit=0,o[l].p=null}const z={l:0,c:0,lc:0};function ne(o,l,x,m,T){for(;x<o;)l=l<<8|un(m,T),x+=8;x-=o,z.l=l>>x&(1<<o)-1,z.c=l,z.lc=x}const ie=new Array(59);function se(o){for(let x=0;x<=58;++x)ie[x]=0;for(let x=0;x<65537;++x)ie[o[x]]+=1;let l=0;for(let x=58;x>0;--x){const m=l+ie[x]>>1;ie[x]=l,l=m}for(let x=0;x<65537;++x){const m=o[x];m>0&&(o[x]=m|ie[m]++<<6)}}function re(o,l,x,m,T,b){const E=l;let v=0,R=0;for(;m<=T;m++){if(E.value-l.value>x)return!1;ne(6,v,R,o,E);const _=z.l;if(v=z.c,R=z.lc,b[m]=_,_==63){if(E.value-l.value>x)throw new Error("Something wrong with hufUnpackEncTable");ne(8,v,R,o,E);let S=z.l+6;if(v=z.c,R=z.lc,m+S>T+1)throw new Error("Something wrong with hufUnpackEncTable");for(;S--;)b[m++]=0;m--}else if(_>=59){let S=_-59+2;if(m+S>T+1)throw new Error("Something wrong with hufUnpackEncTable");for(;S--;)b[m++]=0;m--}}se(b)}function pe(o){return o&63}function me(o){return o>>6}function Pe(o,l,x,m){for(;l<=x;l++){const T=me(o[l]),b=pe(o[l]);if(T>>b)throw new Error("Invalid table entry");if(b>14){const E=m[T>>b-14];if(E.len)throw new Error("Invalid table entry");if(E.lit++,E.p){const v=E.p;E.p=new Array(E.lit);for(let R=0;R<E.lit-1;++R)E.p[R]=v[R]}else E.p=new Array(1);E.p[E.lit-1]=l}else if(b){let E=0;for(let v=1<<14-b;v>0;v--){const R=m[(T<<14-b)+E];if(R.len||R.p)throw new Error("Invalid table entry");R.len=b,R.lit=l,E++}}}return!0}const Te={c:0,lc:0};function Xe(o,l,x,m){o=o<<8|un(x,m),l+=8,Te.c=o,Te.lc=l}const we={c:0,lc:0};function He(o,l,x,m,T,b,E,v,R){if(o==l){m<8&&(Xe(x,m,T,b),x=Te.c,m=Te.lc),m-=8;let _=x>>m;if(_=new Uint8Array([_])[0],v.value+_>R)return!1;const S=E[v.value-1];for(;_-- >0;)E[v.value++]=S}else if(v.value<R)E[v.value++]=o;else return!1;we.c=x,we.lc=m}function Ge(o){return o&65535}function it(o){const l=Ge(o);return l>32767?l-65536:l}const ae={a:0,b:0};function Le(o,l){const x=it(o),T=it(l),b=x+(T&1)+(T>>1),E=b,v=b-T;ae.a=E,ae.b=v}function De(o,l){const x=Ge(o),m=Ge(l),T=x-(m>>1)&65535,b=m+T-32768&65535;ae.a=b,ae.b=T}function _s(o,l,x,m,T,b,E){const v=E<16384,R=x>T?T:x;let _=1,S,k;for(;_<=R;)_<<=1;for(_>>=1,S=_,_>>=1;_>=1;){k=0;const L=k+b*(T-S),P=b*_,X=b*S,O=m*_,F=m*S;let W,ue,xe,_e;for(;k<=L;k+=X){let he=k;const te=k+m*(x-S);for(;he<=te;he+=F){const fe=he+O,Ie=he+P,de=Ie+O;v?(Le(o[he+l],o[Ie+l]),W=ae.a,xe=ae.b,Le(o[fe+l],o[de+l]),ue=ae.a,_e=ae.b,Le(W,ue),o[he+l]=ae.a,o[fe+l]=ae.b,Le(xe,_e),o[Ie+l]=ae.a,o[de+l]=ae.b):(De(o[he+l],o[Ie+l]),W=ae.a,xe=ae.b,De(o[fe+l],o[de+l]),ue=ae.a,_e=ae.b,De(W,ue),o[he+l]=ae.a,o[fe+l]=ae.b,De(xe,_e),o[Ie+l]=ae.a,o[de+l]=ae.b)}if(x&_){const fe=he+P;v?Le(o[he+l],o[fe+l]):De(o[he+l],o[fe+l]),W=ae.a,o[fe+l]=ae.b,o[he+l]=W}}if(T&_){let he=k;const te=k+m*(x-S);for(;he<=te;he+=F){const fe=he+O;v?Le(o[he+l],o[fe+l]):De(o[he+l],o[fe+l]),W=ae.a,o[fe+l]=ae.b,o[he+l]=W}}S=_,_>>=1}return k}function Es(o,l,x,m,T,b,E,v,R){let _=0,S=0;const k=E,L=Math.trunc(m.value+(T+7)/8);for(;m.value<L;)for(Xe(_,S,x,m),_=Te.c,S=Te.lc;S>=14;){const X=_>>S-14&16383,O=l[X];if(O.len)S-=O.len,He(O.lit,b,_,S,x,m,v,R,k),_=we.c,S=we.lc;else{if(!O.p)throw new Error("hufDecode issues");let F;for(F=0;F<O.lit;F++){const W=pe(o[O.p[F]]);for(;S<W&&m.value<L;)Xe(_,S,x,m),_=Te.c,S=Te.lc;if(S>=W&&me(o[O.p[F]])==(_>>S-W&(1<<W)-1)){S-=W,He(O.p[F],b,_,S,x,m,v,R,k),_=we.c,S=we.lc;break}}if(F==O.lit)throw new Error("hufDecode issues")}}const P=8-T&7;for(_>>=P,S-=P;S>0;){const X=l[_<<14-S&16383];if(X.len)S-=X.len,He(X.lit,b,_,S,x,m,v,R,k),_=we.c,S=we.lc;else throw new Error("hufDecode issues")}return!0}function rn(o,l,x,m,T,b){const E={value:0},v=x.value,R=ye(l,x),_=ye(l,x);x.value+=4;const S=ye(l,x);if(x.value+=4,R<0||R>=65537||_<0||_>=65537)throw new Error("Something wrong with HUF_ENCSIZE");const k=new Array(65537),L=new Array(16384);B(L);const P=m-(x.value-v);if(re(o,x,P,R,_,k),S>8*(m-(x.value-v)))throw new Error("Something wrong with hufUncompress");Pe(k,R,_,L),Es(k,L,o,x,S,_,b,T,E)}function Ss(o,l,x){for(let m=0;m<x;++m)l[m]=o[l[m]]}function on(o){for(let l=1;l<o.length;l++){const x=o[l-1]+o[l]-128;o[l]=x}}function an(o,l){let x=0,m=Math.floor((o.length+1)/2),T=0;const b=o.length-1;for(;!(T>b||(l[T++]=o[x++],T>b));)l[T++]=o[m++]}function cn(o){let l=o.byteLength;const x=new Array;let m=0;const T=new DataView(o);for(;l>0;){const b=T.getInt8(m++);if(b<0){const E=-b;l-=E+1;for(let v=0;v<E;v++)x.push(T.getUint8(m++))}else{const E=b;l-=2;const v=T.getUint8(m++);for(let R=0;R<E+1;R++)x.push(v)}}return x}function vs(o,l,x,m,T,b){let E=new DataView(b.buffer);const v=x[o.idx[0]].width,R=x[o.idx[0]].height,_=3,S=Math.floor(v/8),k=Math.ceil(v/8),L=Math.ceil(R/8),P=v-(k-1)*8,X=R-(L-1)*8,O={value:0},F=new Array(_),W=new Array(_),ue=new Array(_),xe=new Array(_),_e=new Array(_);for(let te=0;te<_;++te)_e[te]=l[o.idx[te]],F[te]=te<1?0:F[te-1]+k*L,W[te]=new Float32Array(64),ue[te]=new Uint16Array(64),xe[te]=new Uint16Array(k*64);for(let te=0;te<L;++te){let fe=8;te==L-1&&(fe=X);let Ie=8;for(let oe=0;oe<k;++oe){oe==k-1&&(Ie=P);for(let ce=0;ce<_;++ce)ue[ce].fill(0),ue[ce][0]=T[F[ce]++],Rs(O,m,ue[ce]),Is(ue[ce],W[ce]),Ms(W[ce]);Cs(W);for(let ce=0;ce<_;++ce)Ls(W[ce],xe[ce],oe*64)}let de=0;for(let oe=0;oe<_;++oe){const ce=x[o.idx[oe]].type;for(let Ne=8*te;Ne<8*te+fe;++Ne){de=_e[oe][Ne];for(let ht=0;ht<S;++ht){const Ce=ht*64+(Ne&7)*8;E.setUint16(de+0*2*ce,xe[oe][Ce+0],!0),E.setUint16(de+1*2*ce,xe[oe][Ce+1],!0),E.setUint16(de+2*2*ce,xe[oe][Ce+2],!0),E.setUint16(de+3*2*ce,xe[oe][Ce+3],!0),E.setUint16(de+4*2*ce,xe[oe][Ce+4],!0),E.setUint16(de+5*2*ce,xe[oe][Ce+5],!0),E.setUint16(de+6*2*ce,xe[oe][Ce+6],!0),E.setUint16(de+7*2*ce,xe[oe][Ce+7],!0),de+=8*2*ce}}if(S!=k)for(let Ne=8*te;Ne<8*te+fe;++Ne){const ht=_e[oe][Ne]+8*S*2*ce,Ce=S*64+(Ne&7)*8;for(let Rt=0;Rt<Ie;++Rt)E.setUint16(ht+Rt*2*ce,xe[oe][Ce+Rt],!0)}}}const he=new Uint16Array(v);E=new DataView(b.buffer);for(let te=0;te<_;++te){x[o.idx[te]].decoded=!0;const fe=x[o.idx[te]].type;if(x[te].type==2)for(let Ie=0;Ie<R;++Ie){const de=_e[te][Ie];for(let oe=0;oe<v;++oe)he[oe]=E.getUint16(de+oe*2*fe,!0);for(let oe=0;oe<v;++oe)E.setFloat32(de+oe*2*fe,M(he[oe]),!0)}}}function Rs(o,l,x){let m,T=1;for(;T<64;)m=l[o.value],m==65280?T=64:m>>8==255?T+=m&255:(x[T]=m,T++),o.value++}function Is(o,l){l[0]=M(o[0]),l[1]=M(o[1]),l[2]=M(o[5]),l[3]=M(o[6]),l[4]=M(o[14]),l[5]=M(o[15]),l[6]=M(o[27]),l[7]=M(o[28]),l[8]=M(o[2]),l[9]=M(o[4]),l[10]=M(o[7]),l[11]=M(o[13]),l[12]=M(o[16]),l[13]=M(o[26]),l[14]=M(o[29]),l[15]=M(o[42]),l[16]=M(o[3]),l[17]=M(o[8]),l[18]=M(o[12]),l[19]=M(o[17]),l[20]=M(o[25]),l[21]=M(o[30]),l[22]=M(o[41]),l[23]=M(o[43]),l[24]=M(o[9]),l[25]=M(o[11]),l[26]=M(o[18]),l[27]=M(o[24]),l[28]=M(o[31]),l[29]=M(o[40]),l[30]=M(o[44]),l[31]=M(o[53]),l[32]=M(o[10]),l[33]=M(o[19]),l[34]=M(o[23]),l[35]=M(o[32]),l[36]=M(o[39]),l[37]=M(o[45]),l[38]=M(o[52]),l[39]=M(o[54]),l[40]=M(o[20]),l[41]=M(o[22]),l[42]=M(o[33]),l[43]=M(o[38]),l[44]=M(o[46]),l[45]=M(o[51]),l[46]=M(o[55]),l[47]=M(o[60]),l[48]=M(o[21]),l[49]=M(o[34]),l[50]=M(o[37]),l[51]=M(o[47]),l[52]=M(o[50]),l[53]=M(o[56]),l[54]=M(o[59]),l[55]=M(o[61]),l[56]=M(o[35]),l[57]=M(o[36]),l[58]=M(o[48]),l[59]=M(o[49]),l[60]=M(o[57]),l[61]=M(o[58]),l[62]=M(o[62]),l[63]=M(o[63])}function Ms(o){const l=.5*Math.cos(.7853975),x=.5*Math.cos(3.14159/16),m=.5*Math.cos(3.14159/8),T=.5*Math.cos(3*3.14159/16),b=.5*Math.cos(5*3.14159/16),E=.5*Math.cos(3*3.14159/8),v=.5*Math.cos(7*3.14159/16),R=new Array(4),_=new Array(4),S=new Array(4),k=new Array(4);for(let L=0;L<8;++L){const P=L*8;R[0]=m*o[P+2],R[1]=E*o[P+2],R[2]=m*o[P+6],R[3]=E*o[P+6],_[0]=x*o[P+1]+T*o[P+3]+b*o[P+5]+v*o[P+7],_[1]=T*o[P+1]-v*o[P+3]-x*o[P+5]-b*o[P+7],_[2]=b*o[P+1]-x*o[P+3]+v*o[P+5]+T*o[P+7],_[3]=v*o[P+1]-b*o[P+3]+T*o[P+5]-x*o[P+7],S[0]=l*(o[P+0]+o[P+4]),S[3]=l*(o[P+0]-o[P+4]),S[1]=R[0]+R[3],S[2]=R[1]-R[2],k[0]=S[0]+S[1],k[1]=S[3]+S[2],k[2]=S[3]-S[2],k[3]=S[0]-S[1],o[P+0]=k[0]+_[0],o[P+1]=k[1]+_[1],o[P+2]=k[2]+_[2],o[P+3]=k[3]+_[3],o[P+4]=k[3]-_[3],o[P+5]=k[2]-_[2],o[P+6]=k[1]-_[1],o[P+7]=k[0]-_[0]}for(let L=0;L<8;++L)R[0]=m*o[16+L],R[1]=E*o[16+L],R[2]=m*o[48+L],R[3]=E*o[48+L],_[0]=x*o[8+L]+T*o[24+L]+b*o[40+L]+v*o[56+L],_[1]=T*o[8+L]-v*o[24+L]-x*o[40+L]-b*o[56+L],_[2]=b*o[8+L]-x*o[24+L]+v*o[40+L]+T*o[56+L],_[3]=v*o[8+L]-b*o[24+L]+T*o[40+L]-x*o[56+L],S[0]=l*(o[L]+o[32+L]),S[3]=l*(o[L]-o[32+L]),S[1]=R[0]+R[3],S[2]=R[1]-R[2],k[0]=S[0]+S[1],k[1]=S[3]+S[2],k[2]=S[3]-S[2],k[3]=S[0]-S[1],o[0+L]=k[0]+_[0],o[8+L]=k[1]+_[1],o[16+L]=k[2]+_[2],o[24+L]=k[3]+_[3],o[32+L]=k[3]-_[3],o[40+L]=k[2]-_[2],o[48+L]=k[1]-_[1],o[56+L]=k[0]-_[0]}function Cs(o){for(let l=0;l<64;++l){const x=o[0][l],m=o[1][l],T=o[2][l];o[0][l]=x+1.5747*T,o[1][l]=x-.1873*m-.4682*T,o[2][l]=x+1.8556*m}}function Ls(o,l,x){for(let m=0;m<64;++m)l[x+m]=f.DataUtils.toHalfFloat(Ds(o[m]))}function Ds(o){return o<=1?Math.sign(o)*Math.pow(Math.abs(o),2.2):Math.sign(o)*Math.pow(y,Math.abs(o)-1)}function ln(o){return new DataView(o.array.buffer,o.offset.value,o.size)}function Ns(o){const l=o.viewer.buffer.slice(o.offset.value,o.offset.value+o.size),x=new Uint8Array(cn(l)),m=new Uint8Array(x.length);return on(x),an(x,m),new DataView(m.buffer)}function Bt(o){const l=o.array.slice(o.offset.value,o.offset.value+o.size),x=ut(l),m=new Uint8Array(x.length);return on(x),an(x,m),new DataView(m.buffer)}function ks(o){const l=o.viewer,x={value:o.offset.value},m=new Uint16Array(o.width*o.scanlineBlockSize*(o.channels*o.type)),T=new Uint8Array(8192);let b=0;const E=new Array(o.channels);for(let X=0;X<o.channels;X++)E[X]={},E[X].start=b,E[X].end=E[X].start,E[X].nx=o.width,E[X].ny=o.lines,E[X].size=o.type,b+=E[X].nx*E[X].ny*E[X].size;const v=at(l,x),R=at(l,x);if(R>=8192)throw new Error("Something is wrong with PIZ_COMPRESSION BITMAP_SIZE");if(v<=R)for(let X=0;X<R-v+1;X++)T[X+v]=We(l,x);const _=new Uint16Array(65536),S=K(T,_),k=ye(l,x);rn(o.array,l,x,k,m,b);for(let X=0;X<o.channels;++X){const O=E[X];for(let F=0;F<E[X].size;++F)_s(m,O.start+F,O.nx,O.size,O.ny,O.nx*O.size,S)}Ss(_,m,b);let L=0;const P=new Uint8Array(m.buffer.byteLength);for(let X=0;X<o.lines;X++)for(let O=0;O<o.channels;O++){const F=E[O],W=F.nx*F.size,ue=new Uint8Array(m.buffer,F.end*2,W*2);P.set(ue,L),L+=W*2,F.end+=W}return new DataView(P.buffer)}function Os(o){const l=o.array.slice(o.offset.value,o.offset.value+o.size),x=ut(l),m=o.lines*o.channels*o.width,T=o.type==1?new Uint16Array(m):new Uint32Array(m);let b=0,E=0;const v=new Array(4);for(let R=0;R<o.lines;R++)for(let _=0;_<o.channels;_++){let S=0;switch(o.type){case 1:v[0]=b,v[1]=v[0]+o.width,b=v[1]+o.width;for(let k=0;k<o.width;++k){const L=x[v[0]++]<<8|x[v[1]++];S+=L,T[E]=S,E++}break;case 2:v[0]=b,v[1]=v[0]+o.width,v[2]=v[1]+o.width,b=v[2]+o.width;for(let k=0;k<o.width;++k){const L=x[v[0]++]<<24|x[v[1]++]<<16|x[v[2]++]<<8;S+=L,T[E]=S,E++}break}}return new DataView(T.buffer)}function hn(o){const l=o.viewer,x={value:o.offset.value},m=new Uint8Array(o.width*o.lines*(o.channels*o.type*2)),T={version:Re(l,x),unknownUncompressedSize:Re(l,x),unknownCompressedSize:Re(l,x),acCompressedSize:Re(l,x),dcCompressedSize:Re(l,x),rleCompressedSize:Re(l,x),rleUncompressedSize:Re(l,x),rleRawSize:Re(l,x),totalAcUncompressedCount:Re(l,x),totalDcUncompressedCount:Re(l,x),acCompression:Re(l,x)};if(T.version<2)throw new Error("EXRLoader.parse: "+lt.compression+" version "+T.version+" is unsupported");const b=new Array;let E=at(l,x)-2;for(;E>0;){const O=St(l.buffer,x),F=We(l,x),W=F>>2&3,ue=(F>>4)-1,xe=new Int8Array([ue])[0],_e=We(l,x);b.push({name:O,index:xe,type:_e,compression:W}),E-=O.length+3}const v=lt.channels,R=new Array(o.channels);for(let O=0;O<o.channels;++O){const F=R[O]={},W=v[O];F.name=W.name,F.compression=0,F.decoded=!1,F.type=W.pixelType,F.pLinear=W.pLinear,F.width=o.width,F.height=o.lines}const _={idx:new Array(3)};for(let O=0;O<o.channels;++O){const F=R[O];for(let W=0;W<b.length;++W){const ue=b[W];F.name==ue.name&&(F.compression=ue.compression,ue.index>=0&&(_.idx[ue.index]=O),F.offset=O)}}let S,k,L;if(T.acCompressedSize>0)switch(T.acCompression){case 0:S=new Uint16Array(T.totalAcUncompressedCount),rn(o.array,l,x,T.acCompressedSize,S,T.totalAcUncompressedCount);break;case 1:const O=o.array.slice(x.value,x.value+T.totalAcUncompressedCount),F=ut(O);S=new Uint16Array(F.buffer),x.value+=T.totalAcUncompressedCount;break}if(T.dcCompressedSize>0){const O={array:o.array,offset:x,size:T.dcCompressedSize};k=new Uint16Array(Bt(O).buffer),x.value+=T.dcCompressedSize}if(T.rleRawSize>0){const O=o.array.slice(x.value,x.value+T.rleCompressedSize),F=ut(O);L=cn(F.buffer),x.value+=T.rleCompressedSize}let P=0;const X=new Array(R.length);for(let O=0;O<X.length;++O)X[O]=new Array;for(let O=0;O<o.lines;++O)for(let F=0;F<R.length;++F)X[F].push(P),P+=R[F].width*o.type*2;vs(_,X,R,S,k,m);for(let O=0;O<R.length;++O){const F=R[O];if(!F.decoded)switch(F.compression){case 2:let W=0,ue=0;for(let xe=0;xe<o.lines;++xe){let _e=X[O][W];for(let he=0;he<F.width;++he){for(let te=0;te<2*F.type;++te)m[_e++]=L[ue+te*F.width*F.height];ue++}W++}break;case 1:default:throw new Error("EXRLoader.parse: unsupported channel compression")}}return new DataView(m.buffer)}function St(o,l){const x=new Uint8Array(o);let m=0;for(;x[l.value+m]!=0;)m+=1;const T=new TextDecoder().decode(x.slice(l.value,l.value+m));return l.value=l.value+m+1,T}function Fs(o,l,x){const m=new TextDecoder().decode(new Uint8Array(o).slice(l.value,l.value+x));return l.value=l.value+x,m}function Us(o,l){const x=ot(o,l),m=ye(o,l);return[x,m]}function Bs(o,l){const x=ye(o,l),m=ye(o,l);return[x,m]}function ot(o,l){const x=o.getInt32(l.value,!0);return l.value=l.value+4,x}function ye(o,l){const x=o.getUint32(l.value,!0);return l.value=l.value+4,x}function un(o,l){const x=o[l.value];return l.value=l.value+1,x}function We(o,l){const x=o.getUint8(l.value);return l.value=l.value+1,x}const Re=function(o,l){let x;return"getBigInt64"in DataView.prototype?x=Number(o.getBigInt64(l.value,!0)):x=o.getUint32(l.value+4,!0)+Number(o.getUint32(l.value,!0)<<32),l.value+=8,x};function ge(o,l){const x=o.getFloat32(l.value,!0);return l.value+=4,x}function Ps(o,l){return f.DataUtils.toHalfFloat(ge(o,l))}function M(o){const l=(o&31744)>>10,x=o&1023;return(o>>15?-1:1)*(l?l===31?x?NaN:1/0:Math.pow(2,l-15)*(1+x/1024):6103515625e-14*(x/1024))}function at(o,l){const x=o.getUint16(l.value,!0);return l.value+=2,x}function Hs(o,l){return M(at(o,l))}function Gs(o,l,x,m){const T=x.value,b=[];for(;x.value<T+m-1;){const E=St(l,x),v=ot(o,x),R=We(o,x);x.value+=3;const _=ot(o,x),S=ot(o,x);b.push({name:E,pixelType:v,pLinear:R,xSampling:_,ySampling:S})}return x.value+=1,b}function zs(o,l){const x=ge(o,l),m=ge(o,l),T=ge(o,l),b=ge(o,l),E=ge(o,l),v=ge(o,l),R=ge(o,l),_=ge(o,l);return{redX:x,redY:m,greenX:T,greenY:b,blueX:E,blueY:v,whiteX:R,whiteY:_}}function Zs(o,l){const x=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],m=We(o,l);return x[m]}function js(o,l){const x=ye(o,l),m=ye(o,l),T=ye(o,l),b=ye(o,l);return{xMin:x,yMin:m,xMax:T,yMax:b}}function Vs(o,l){const x=["INCREASING_Y"],m=We(o,l);return x[m]}function Ks(o,l){const x=ge(o,l),m=ge(o,l);return[x,m]}function Xs(o,l){const x=ge(o,l),m=ge(o,l),T=ge(o,l);return[x,m,T]}function Ws(o,l,x,m,T){if(m==="string"||m==="stringvector"||m==="iccProfile")return Fs(l,x,T);if(m==="chlist")return Gs(o,l,x,T);if(m==="chromaticities")return zs(o,x);if(m==="compression")return Zs(o,x);if(m==="box2i")return js(o,x);if(m==="lineOrder")return Vs(o,x);if(m==="float")return ge(o,x);if(m==="v2f")return Ks(o,x);if(m==="v3f")return Xs(o,x);if(m==="int")return ot(o,x);if(m==="rational")return Us(o,x);if(m==="timecode")return Bs(o,x);if(m==="preview")return x.value+=T,"skipped";x.value+=T}function Ys(o,l,x){const m={};if(o.getUint32(0,!0)!=20000630)throw new Error("THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.");m.version=o.getUint8(4);const T=o.getUint8(5);m.spec={singleTile:!!(T&2),longName:!!(T&4),deepFormat:!!(T&8),multiPart:!!(T&16)},x.value=8;let b=!0;for(;b;){const E=St(l,x);if(E==0)b=!1;else{const v=St(l,x),R=ye(o,x),_=Ws(o,l,x,v,R);_===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${v}'.`):m[E]=_}}if(T&-5)throw console.error("EXRHeader:",m),new Error("THREE.EXRLoader: provided file is currently unsupported.");return m}function Qs(o,l,x,m,T){const b={size:0,viewer:l,array:x,offset:m,width:o.dataWindow.xMax-o.dataWindow.xMin+1,height:o.dataWindow.yMax-o.dataWindow.yMin+1,channels:o.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:o.channels[0].pixelType,uncompress:null,getter:null,format:null,encoding:null};switch(o.compression){case"NO_COMPRESSION":b.lines=1,b.uncompress=ln;break;case"RLE_COMPRESSION":b.lines=1,b.uncompress=Ns;break;case"ZIPS_COMPRESSION":b.lines=1,b.uncompress=Bt;break;case"ZIP_COMPRESSION":b.lines=16,b.uncompress=Bt;break;case"PIZ_COMPRESSION":b.lines=32,b.uncompress=ks;break;case"PXR24_COMPRESSION":b.lines=16,b.uncompress=Os;break;case"DWAA_COMPRESSION":b.lines=32,b.uncompress=hn;break;case"DWAB_COMPRESSION":b.lines=256,b.uncompress=hn;break;default:throw new Error("EXRLoader.parse: "+o.compression+" is unsupported")}if(b.scanlineBlockSize=b.lines,b.type==1)switch(T){case f.FloatType:b.getter=Hs,b.inputSize=2;break;case f.HalfFloatType:b.getter=at,b.inputSize=2;break}else if(b.type==2)switch(T){case f.FloatType:b.getter=ge,b.inputSize=4;break;case f.HalfFloatType:b.getter=Ps,b.inputSize=4}else throw new Error("EXRLoader.parse: unsupported pixelType "+b.type+" for "+o.compression+".");b.blockCount=(o.dataWindow.yMax+1)/b.scanlineBlockSize;for(let v=0;v<b.blockCount;v++)Re(l,m);b.outputChannels=b.channels==3?4:b.channels;const E=b.width*b.height*b.outputChannels;switch(T){case f.FloatType:b.byteArray=new Float32Array(E),b.channels<b.outputChannels&&b.byteArray.fill(1,0,E);break;case f.HalfFloatType:b.byteArray=new Uint16Array(E),b.channels<b.outputChannels&&b.byteArray.fill(15360,0,E);break;default:console.error("THREE.EXRLoader: unsupported type: ",T);break}return b.bytesPerLine=b.width*b.inputSize*b.channels,b.outputChannels==4?(b.format=f.RGBAFormat,b.encoding=f.LinearEncoding):(b.format=f.RedFormat,b.encoding=f.LinearEncoding),b}const vt=new DataView(e),qs=new Uint8Array(e),ct={value:0},lt=Ys(vt,e,ct),q=Qs(lt,vt,qs,ct,this.type),xn={value:0},Js={R:0,G:1,B:2,A:3,Y:0};for(let o=0;o<q.height/q.scanlineBlockSize;o++){const l=ye(vt,ct);q.size=ye(vt,ct),q.lines=l+q.scanlineBlockSize>q.height?q.height-l:q.scanlineBlockSize;const m=q.size<q.lines*q.bytesPerLine?q.uncompress(q):ln(q);ct.value+=q.size;for(let T=0;T<q.scanlineBlockSize;T++){const b=T+o*q.scanlineBlockSize;if(b>=q.height)break;for(let E=0;E<q.channels;E++){const v=Js[lt.channels[E].name];for(let R=0;R<q.width;R++){xn.value=(T*(q.channels*q.width)+E*q.width+R)*q.inputSize;const _=(q.height-1-b)*(q.width*q.outputChannels)+R*q.outputChannels+v;q.byteArray[_]=q.getter(m,xn)}}}}return{header:lt,width:q.width,height:q.height,data:q.byteArray,format:q.format,encoding:q.encoding,type:this.type}}setDataType(e){return this.type=e,this}load(e,t,n,s){function i(r,a){r.encoding=a.encoding,r.minFilter=f.LinearFilter,r.magFilter=f.LinearFilter,r.generateMipmaps=!1,r.flipY=!1,t&&t(r,a)}return super.load(e,i,n,s)}}function xt(){const u=["1449375sgRFnE","2544020heSmRS","66AftygW","179217mdMCFB","quaternionToVector3","9452373FebIYQ","422370AHdoVZ","average","getRandomRange","getRandomIntRange","forEach","3pYHxYD","round","1066822WOFJHx","random","11830304UZPOar"];return xt=function(){return u},xt()}const Ze=ft;function ft(u,e){const t=xt();return ft=function(n,s){return n=n-332,t[n]},ft(u,e)}(function(u,e){const t=ft,n=u();for(;[];)try{if(parseInt(t(335))/1+-parseInt(t(332))/2+parseInt(t(346))/3*(parseInt(t(336))/4)+parseInt(t(341))/5*(-parseInt(t(337))/6)+-parseInt(t(340))/7+parseInt(t(334))/8+parseInt(t(338))/9===e)break;n.push(n.shift())}catch{n.push(n.shift())}})(xt,771117);class dt{static[Ze(343)](e,t){return Math.random()*(t-e)+e}static[Ze(344)](e,t){const n=Ze;return Math[n(347)](Math[n(333)]()*(t-e)+e)}static[Ze(339)](e,t,n,s){const i=e+e,r=t+t,a=n+n,c=e*r,h=e*a,p=t*a,d=s*i,g=s*r,w=s*a;return{x:c-w,y:p+d,z:h-g}}static map(e,t,n,s,i){return(e-t)*(i-s)/(n-t)+s}static[Ze(342)](e){const t=Ze;let n=0;return e[t(345)](s=>{n+=s}),n/e.length}}const $=$e;(function(u,e){const t=$e,n=u();for(;[];)try{if(-parseInt(t(363))/1+parseInt(t(316))/2+parseInt(t(356))/3+-parseInt(t(373))/4*(-parseInt(t(382))/5)+-parseInt(t(369))/6+-parseInt(t(344))/7*(-parseInt(t(321))/8)+-parseInt(t(374))/9===e)break;n.push(n.shift())}catch{n.push(n.shift())}})(pt,781015);function $e(u,e){const t=pt();return $e=function(n,s){return n=n-309,t[n]},$e(u,e)}class ls{constructor(e,t,n){const s=$e;this[s(342)]=n,this[s(317)]=e,this[s(350)]=t,this[s(353)]={interactables:[],bg:[],player:null},this[s(341)]={looping:[],onClick:[],onHover:[],camera:[]},this.wrappedSceneZones=[],this[s(314)](this.models),this[s(378)](this.wrappedSceneZones)}[$(314)](e){const t=$,n={interactables:[],bgMesh:[],player:null},s=[];for(let i=0;i<e.length;i++){const r=e[i],a=r[t(312)][t(330)];let c={};const h=this[t(366)](a,r[t(310)]);switch(a[t(357)]){case t(318):c=this.getInteractableObject(r,a,h),n[t(329)][t(338)](c);break;case t(347):c=this[t(387)](r,a),s[t(338)](c);break;case t(320):n[t(320)][t(338)](r[t(312)]);break;case t(334):n[t(320)][t(338)](r[t(312)]);break;case t(349):n[t(349)]=r[t(312)];break}}this[t(353)]=n,this[t(365)]=s}[$(378)](e){const t=$,n=[...e];for(let s=0;s<n.length;s++){const i=n[s],r=i[t(384)],a=this[t(315)](i.zone);a[t(359)]<=0&&this[t(358)](i[t(328)])[t(323)](g=>{a[t(338)](g)});const c=this[t(313)](a),h=new Q[t(326)];c[t(335)](h);const p=new Q[t(326)];c[t(339)](p),n[s][t(311)]=r,n[s][t(377)]=c,n[s].lookAtTargetSize=p,n[s][t(333)]=h}this[t(365)]=n}[$(343)](e){const t=$;let n=null;return this[t(365)].forEach(s=>{s[t(355)]===e&&(n=s)}),n}getSceneZoneByName(e){const t=$;let n=null,s=null;return this[t(365)][t(323)](i=>{i[t(328)]===e&&(n=i)}),{zoneBox:n,index:s}}getLoopingAnimations(){const e=$,t={looping:[]};return this.wrappedAnimations.looping[e(323)](n=>{const s=e;n[s(342)].forEach(i=>{const r=s;t.looping[r(338)](i)})}),t}[$(368)](){return this.wrappedAnimations}getPlayer(){const e=$;return this[e(353)][e(349)]}[$(337)](){const e=$;return this[e(353)][e(329)]}[$(371)](e){const t=$,n=[];for(let s=0;s<this[t(353)][t(329)][t(359)];s++){const i=this[t(353)][t(329)][s];i.zone===e&&n.push(i)}return n}[$(315)](e){const t=$,n=[];for(let s=0;s<this.wrappedModels[t(329)][t(359)];s++){const i=this[t(353)][t(329)][s];i[t(328)]===e&&n[t(338)](i[t(379)][t(312)])}return n}getBackgroundModelsByZone(e){const t=$,n=[];for(let s=0;s<this[t(353)][t(320)][t(359)];s++){const i=this[t(353)].bgMesh[s];i[t(357)]==="Group"?i[t(324)].forEach(r=>{const a=t;i[a(330)][a(328)]===e&&n[a(338)](r)}):i[t(330)][t(328)]===e&&n[t(338)](i)}return n}getBoundingBox(e){const t=$,n=new Q[t(362)];e[t(357)]===t(351)&&(e=[...e[t(324)]]);for(let s=0;s<e[t(359)];s++){const i=e[s];n[t(348)](i)}return n}[$(376)](e){const t=$;for(let n=0;n<this.models[t(359)];n++){const s=this[t(317)][n][t(312)];if(s.name===e)return s}return null}[$(322)](e){const t=$;for(let n=0;n<this[t(342)][t(359)];n++){const s=this[t(342)][n];if(s.name===e)return s}return null}[$(372)](e){const t=$,n=e.split(","),s=[];for(let i=0;i<n[t(359)];i++){const r=n[i];s[t(338)](this[t(322)](r))}return s}[$(381)](e,t){const n=$;for(let s=0;s<e[n(364)][n(359)];s++)if(e[n(364)][s][n(310)]===t)return e[n(364)][s];return null}getCameraAnimationStart(e){const t=$,n={position:null,rotation:null};for(let s=0;s<e[t(309)].length;s++){const i=e[t(309)][s];for(let r=0;r<i[t(364)][t(359)];r++){const a=i[t(364)][r];if(a.name[t(361)](t(360)))n.position=new Q[t(326)](a[t(325)][0],a[t(325)][1],a.values[2]);else if(a.name[t(361)](".quaternion")){const c=new Q[t(380)](a[t(325)][0],a.values[1],a[t(325)][2],a.values[3]);n[t(354)]=c}}}return n}getAnimations(e,t){const n=$;let s=null,i=null,r=null,a=null;return n(346)in e&&(s=this[n(372)](e[n(346)]),this.wrappedAnimations[n(340)][n(338)]({name:t,animations:s})),n(370)in e&&(i=this.getAnimationsFromCSV(e[n(370)]),this[n(341)][n(383)][n(338)]({name:t,animations:i})),n(319)in e&&(r=this[n(372)](e[n(319)]),this[n(341)].onHover[n(338)]({name:t,animations:r})),n(385)in e&&(a=this.getAnimationsFromCSV(e[n(385)]),this[n(341)][n(309)][n(338)]({name:t,animations:a})),{loopAnimations:s,onHoverAnimations:r,onClickAnimations:i,cameraAnimations:a}}[$(345)](e,t,n){const s=$,i=this.getRaycastTarget(t[s(336)]),r={name:e[s(310)],raycastTarget:i,element:e,animations:{},zone:t[s(328)]};return n.onHoverAnimations!==null&&(r[s(342)][s(352)]=n[s(319)]),n[s(370)]!==null&&(r[s(342)][s(383)]=n[s(370)]),n[s(385)]!==null&&(r[s(342)][s(309)]=n.cameraAnimations),r}[$(387)](e,t){const n=$,s={zone:t[n(328)],index:parseInt(t[n(355)],10),position:e[n(312)][n(384)]};return e[n(312)][n(386)]=![],s}[$(331)](e){const t=$,n=this[t(376)](e);return n==null?(console[t(375)]("Missing raycast target for: ",e),null):(n[t(332)][t(367)]=Q[t(327)],n[t(332)][t(386)]=![],n)}}function pt(){const u=["getWrappedAnimations","3197352jRBvdV","onClickAnimations","getInteractablesByZone","getAnimationsFromCSV","8CGGtUR","9255870PhJSGf","log","getModel","lookAtTargetBox","updateSceneZones","element","Quaternion","getAnimationTrack","2265665oQkmCN","onClick","position","cameraAnimations","visible","getCameraBoundsObject","camera","name","boxCenter","model","getBoundingBox","wrapScene","getInteractableModelsByZone","1185754Evscww","models","interactable","onHoverAnimations","bgMesh","3741448klHQVk","getAnimation","forEach","children","values","Vector3","BackSide","zone","interactables","userData","getRaycastTarget","material","lookAtTarget","raycastMesh","getCenter","raycastTarget","getInteractables","push","getSize","looping","wrappedAnimations","animations","getSceneZoneByIndex","21jMhzya","getInteractableObject","loopAnimations","cameraBounds","expandByObject","player","lights","Group","onHover","wrappedModels","rotation","index","1540077GLnvEW","type","getBackgroundModelsByZone","length",".position","includes","Box3","1073208YRjciz","tracks","wrappedSceneZones","getAnimations","side"];return pt=function(){return u},pt()}function mt(u,e){const t=gt();return mt=function(n,s){return n=n-295,t[n]},mt(u,e)}const en=mt;(function(u,e){const t=mt,n=u();for(;[];)try{if(-parseInt(t(303))/1+parseInt(t(302))/2+-parseInt(t(297))/3+parseInt(t(295))/4*(parseInt(t(306))/5)+-parseInt(t(296))/6+-parseInt(t(300))/7+-parseInt(t(305))/8*(-parseInt(t(304))/9)===e)break;n.push(n.shift())}catch{n.push(n.shift())}})(gt,292223);function gt(){const u=["258150prhkpd","581613ZkZKpt","10114803SvzCwT","8QCdeJl","30OBTDxI","316964gYkMau","1713000yAxvsS","1118085MMZZhY","json","then","1374499YKcSrv","parse"];return gt=function(){return u},gt()}class hs{async[en(301)](e){const t=en;let n=null;return await fetch(e)[t(299)](s=>s[t(298)]()).then(s=>{n=s}),n}}const ee=je;(function(u,e){const t=je,n=u();for(;[];)try{if(parseInt(t(212))/1+-parseInt(t(241))/2+-parseInt(t(249))/3*(-parseInt(t(281))/4)+-parseInt(t(247))/5+-parseInt(t(269))/6*(-parseInt(t(270))/7)+-parseInt(t(219))/8+parseInt(t(266))/9===e)break;n.push(n.shift())}catch{n.push(n.shift())}})(bt,174366);function bt(){const u=["position","backgroundBlurriness","PointLightHelper","processModel","length","DEBUG_xyz3d","intensity","97054SKdxri","lights","push","getHtmlData","add","background","raycastMesh","845912bSugmt","addGLTFModel","quaternion","contentType","gltf","normalBias","sceneWrapper","color","bgMesh","log","compileEquirectangularShader","renderer",":>> GLTF element unrecognized:","point","size","AxesHelper","gltfLoader","texture","hdr","addEXR","rotation","modelName","669782vDFoDy","target","Vector3","light","pointLight","https://raw.githubusercontent.com/mrdoob/three.js/dev/examples/jsm/libs/draco/","1638605DWuxUC","models","6lRuVce","setDecoderPath","createLightContainer","loadJson","PointLight","dispose","addHDR","scale","Object3D","getModel","interactable","directional","jsonPath","createModelContainer","receiveShadow","backgroundIntensity","set","2978640tojHUN","getHtml","iframe","2466ZXsWle","4235bmmNON","total","addLighting","addAmbientLight","gltf children :>> ","getSceneWrapper","setModelMatrixData","content","interactablesContent","lerp","build","532096Yzmewx","forEach","cameraBounds","path","environment","addPointLight","EquirectangularReflectionMapping","enableAll","load","PMREMGenerator","DirectionalLight","userData","scene","loadModel","SpotLight","Group","DirectionalLightHelper","children","castShadow","AmbientLight","loaded","layers","name","type",'<iframe id="XYZ3d-fullscreen" src="',"fromEquirectangular","jsonData","animations","player","ambientLight","addDirectionalLight","exr","directionalLight"];return bt=function(){return u},bt()}function je(u,e){const t=bt();return je=function(n,s){return n=n-200,t[n]},je(u,e)}class us{constructor(e,t,n){const s=je;this[s(293)]=e,this[s(230)]=t,this.jsonPath=n,this[s(225)];const i=new Kn;if(i[s(250)](s(246)),this[s(235)]=new dn,this[s(235)].setDRACOLoader(i),window.DEBUG_xyz3d){const r=new Q[s(234)](5e3);this[s(293)].add(r)}}[ee(275)](){return this[ee(225)]}async[ee(252)](){const e=ee;return await new hs().parse(this[e(261)])}async[ee(280)](e){const t=ee,n=await this[t(252)](),s=[],i=[],r=await this[t(220)](n[t(248)],e),a=this[t(272)](n[t(213)]);return a[t(214)](...r[t(213)]),s[t(214)](...r.models),i.push(...r[t(308)]),this[t(225)]=new ls(s,a,i),this.sceneWrapper}async[ee(220)](e,t){const n=ee,s=[],i=[],r=[];for(let a=0;a<e[n(209)];a++){const c=e[a],h=function(p){const d=n;t(a+1,e[d(209)],100*p[d(301)]/p[d(271)])};await this[n(294)](c,h).then(p=>{const d=n;window[d(210)]&&console[d(228)](d(274),[...p.gltf[d(293)][d(298)]]);const g=this[d(208)](p);s[d(214)](...g[d(248)]),i[d(214)](...g.lights),r[d(214)](...g[d(308)])})}return{models:s,lights:i,animations:r}}[ee(258)](e,t){const n=ee;for(let s=0;s<e[n(209)];s++){const i=e[s];if(i[n(303)]===t)return i}return null}createModelContainer(e,t){const n=ee,s={name:e[n(303)],model:e};switch(this.setModelMatrixData(e,t),e[n(299)]=t[n(299)],e[n(263)]=t.receiveShadow,e[n(292)][n(304)]){case n(227):break;case n(259):const i=this[n(267)](t,e[n(303)]);s[n(222)]=i.type,s[n(277)]=i[n(277)];break;case n(218):break;case n(283):break;case n(200):break}return s}[ee(251)](e,t){return{type:e,light:t}}[ee(208)](e){const t=ee,n=[...e[t(223)][t(293)].children],s=e[t(223)][t(308)],i=[],r=[],a=1e5;for(let c=0;c<n[t(209)];c++){const h=n[c];switch(h[t(302)][t(288)](),h[t(304)]){case"Mesh":i[t(214)](this.createModelContainer(h,e[t(307)]));break;case t(296):h.children[t(282)](p=>{this[t(276)](p,e.jsonData)}),i[t(214)](this[t(262)](h,e[t(307)]));break;case t(257):i[t(214)](this[t(262)](h,e[t(307)]));break;case"PointLight":h[t(211)]/=a,r[t(214)](this[t(251)](t(232),h));break;case t(291):h[t(211)]/=a,r.push(this[t(251)](t(260),h));break;case t(295):h[t(211)]/=a,r[t(214)](this[t(251)]("spot",h));break;default:console[t(228)](t(231),h);break}this[t(293)][t(216)](h)}return{models:i,lights:r,animations:s}}[ee(276)](e,t){const n=ee;e[n(205)][n(265)](e.position.x+t[n(205)].x,e.position.y+t.position.y,e.position.z+t[n(205)].z),e[n(221)][n(265)](t[n(239)].x,t[n(239)].y,t[n(239)].z,t[n(239)].w),e[n(256)][n(265)](t[n(256)].x,t.scale.y,t[n(256)].z)}[ee(267)](e,t){const n=ee,s=this[n(215)](e,t);if(s[n(277)]!==void 0)return s[n(304)]===n(268)&&(s[n(277)]=n(305)+s.content+'"></iframe>'),s}[ee(215)](e,t){const n=ee,s=e[n(278)];for(let i=0;i<s[n(209)];i++){const r=s[i];if(r[n(240)]===t)return r}return null}async[ee(294)](e,t){return new Promise(n=>{const s=je;return this.gltfLoader[s(289)](".."+e.path,function(i){n({gltf:i,jsonData:e})},t,function(i){console[s(228)]("An error happened "+i)})})}[ee(272)](e){const t=ee,n=[];for(let s=0;s<e[t(209)];s++){const i=e[s];let r,a;const c={type:null,light:null};switch(i.type){case t(237):this[t(255)](i.path,i[t(264)],i[t(206)]);break;case t(203):this[t(238)](i[t(284)],i[t(264)],i[t(206)]);break;case"pointLight":r=new Q[t(243)](i[t(205)].x,i.position.y,i[t(205)].z),a=this[t(286)](r,i[t(226)],i[t(211)],i[t(233)],i[t(299)]),c[t(304)]=t(245),c[t(244)]=a;break;case"directionalLight":r=new Q[t(243)](i.position.x,i[t(205)].y,i[t(205)].z);const h=new Q.Vector3(i[t(242)].x,i[t(242)].y,i.target.z);a=this[t(202)](r,h,i[t(226)],i[t(211)],i[t(299)]),c[t(304)]=t(204),c[t(244)]=a;break;case t(201):a=this[t(273)](i[t(226)],i[t(211)]),c[t(304)]=t(201),c[t(244)]=a;break}n[t(214)](c)}return n}[ee(286)](e,t=0,n=1,s=1500,i=![]){const r=ee,a=new Q[r(253)](t,n,s);if(a[r(205)].lerp(e,1),a[r(299)]=i,a[r(224)]=.1,this.scene[r(216)](a),window[r(210)]){const c=new Q[r(207)](a,.25);this.scene[r(216)](c)}return a}addAmbientLight(e=0,t=1){const n=ee,s=new Q[n(300)](e,t);return this[n(293)][n(216)](s),s}[ee(202)](e,t=new Q[ee(243)](0,0,0),n=16777215,s=2,i=![]){const r=ee,a=new Q[r(291)](n,s);if(a[r(205)].lerp(e,1),a[r(242)][r(205)][r(279)](t,1),a.castShadow=i,a.normalBias=.1,this[r(293)].add(a),this[r(293)][r(216)](a[r(242)]),window[r(210)]){const c=new Q[r(297)](a);this[r(293)][r(216)](c)}return a}[ee(255)](e,t,n){const s=ee,i=new Q[s(290)](this[s(230)]);i[s(229)]();let r;new Wn()[s(289)](".."+e,a=>{const c=s;r=i[c(306)](a)[c(236)],this.scene.environment=r,this[c(293)][c(217)]=r,this[c(293)][c(264)]=t,this[c(293)][c(206)]=n,a[c(254)](),i[c(254)]()})}[ee(238)](e,t,n){const s=ee,i=new Q[s(290)](this.renderer);i[s(229)]();let r;new cs()[s(289)](".."+e,a=>{const c=s;a.mapping=Q[c(287)],r=i.fromEquirectangular(a).texture,this[c(293)][c(285)]=r,this[c(293)][c(217)]=r,this[c(293)][c(264)]=t,this[c(293)].backgroundBlurriness=n,a[c(254)](),i.dispose()})}}class et{constructor(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const xs=new f.OrthographicCamera(-1,1,1,-1,0,1),Ut=new f.BufferGeometry;Ut.setAttribute("position",new f.Float32BufferAttribute([-1,3,0,-1,-1,0,3,-1,0],3)),Ut.setAttribute("uv",new f.Float32BufferAttribute([0,2,0,0,2,0],2));class tn{constructor(e){this._mesh=new f.Mesh(Ut,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,xs)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}const nn={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			gl_FragColor = texture2D( tDiffuse, vUv );
			gl_FragColor.a *= opacity;


		}`},fs={shaderID:"luminosityHighPass",uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new f.Color(0)},defaultOpacity:{value:0}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform vec3 defaultColor;
		uniform float defaultOpacity;
		uniform float luminosityThreshold;
		uniform float smoothWidth;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );

			vec3 luma = vec3( 0.299, 0.587, 0.114 );

			float v = dot( texel.xyz, luma );

			vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );

			float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );

			gl_FragColor = mix( outputColor, texel, alpha );

		}`};class Ve extends et{constructor(e,t,n,s){super(),this.strength=t!==void 0?t:1,this.radius=n,this.threshold=s,this.resolution=e!==void 0?new f.Vector2(e.x,e.y):new f.Vector2(256,256),this.clearColor=new f.Color(0,0,0),this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let i=Math.round(this.resolution.x/2),r=Math.round(this.resolution.y/2);this.renderTargetBright=new f.WebGLRenderTarget(i,r),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let d=0;d<this.nMips;d++){const g=new f.WebGLRenderTarget(i,r);g.texture.name="UnrealBloomPass.h"+d,g.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(g);const w=new f.WebGLRenderTarget(i,r);w.texture.name="UnrealBloomPass.v"+d,w.texture.generateMipmaps=!1,this.renderTargetsVertical.push(w),i=Math.round(i/2),r=Math.round(r/2)}const a=fs;this.highPassUniforms=f.UniformsUtils.clone(a.uniforms),this.highPassUniforms.luminosityThreshold.value=s,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new f.ShaderMaterial({uniforms:this.highPassUniforms,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader,defines:{}}),this.separableBlurMaterials=[];const c=[3,5,7,9,11];i=Math.round(this.resolution.x/2),r=Math.round(this.resolution.y/2);for(let d=0;d<this.nMips;d++)this.separableBlurMaterials.push(this.getSeperableBlurMaterial(c[d])),this.separableBlurMaterials[d].uniforms.texSize.value=new f.Vector2(i,r),i=Math.round(i/2),r=Math.round(r/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=t,this.compositeMaterial.uniforms.bloomRadius.value=.1,this.compositeMaterial.needsUpdate=!0;const h=[1,.8,.6,.4,.2];this.compositeMaterial.uniforms.bloomFactors.value=h,this.bloomTintColors=[new f.Vector3(1,1,1),new f.Vector3(1,1,1),new f.Vector3(1,1,1),new f.Vector3(1,1,1),new f.Vector3(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors;const p=nn;this.copyUniforms=f.UniformsUtils.clone(p.uniforms),this.copyUniforms.opacity.value=1,this.materialCopy=new f.ShaderMaterial({uniforms:this.copyUniforms,vertexShader:p.vertexShader,fragmentShader:p.fragmentShader,blending:f.AdditiveBlending,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new f.Color,this.oldClearAlpha=1,this.basic=new f.MeshBasicMaterial,this.fsQuad=new tn(null)}dispose(){for(let e=0;e<this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(let e=0;e<this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose();for(let e=0;e<this.separableBlurMaterials.length;e++)this.separableBlurMaterials[e].dispose();this.compositeMaterial.dispose(),this.materialCopy.dispose(),this.basic.dispose(),this.fsQuad.dispose()}setSize(e,t){let n=Math.round(e/2),s=Math.round(t/2);this.renderTargetBright.setSize(n,s);for(let i=0;i<this.nMips;i++)this.renderTargetsHorizontal[i].setSize(n,s),this.renderTargetsVertical[i].setSize(n,s),this.separableBlurMaterials[i].uniforms.texSize.value=new f.Vector2(n,s),n=Math.round(n/2),s=Math.round(s/2)}render(e,t,n,s,i){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();const r=e.autoClear;e.autoClear=!1,e.setClearColor(this.clearColor,0),i&&e.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=n.texture,e.setRenderTarget(null),e.clear(),this.fsQuad.render(e)),this.highPassUniforms.tDiffuse.value=n.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,e.setRenderTarget(this.renderTargetBright),e.clear(),this.fsQuad.render(e);let a=this.renderTargetBright;for(let c=0;c<this.nMips;c++)this.fsQuad.material=this.separableBlurMaterials[c],this.separableBlurMaterials[c].uniforms.colorTexture.value=a.texture,this.separableBlurMaterials[c].uniforms.direction.value=Ve.BlurDirectionX,e.setRenderTarget(this.renderTargetsHorizontal[c]),e.clear(),this.fsQuad.render(e),this.separableBlurMaterials[c].uniforms.colorTexture.value=this.renderTargetsHorizontal[c].texture,this.separableBlurMaterials[c].uniforms.direction.value=Ve.BlurDirectionY,e.setRenderTarget(this.renderTargetsVertical[c]),e.clear(),this.fsQuad.render(e),a=this.renderTargetsVertical[c];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.setRenderTarget(this.renderTargetsHorizontal[0]),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,i&&e.state.buffers.stencil.setTest(!0),this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(n),this.fsQuad.render(e)),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=r}getSeperableBlurMaterial(e){return new f.ShaderMaterial({defines:{KERNEL_RADIUS:e,SIGMA:e},uniforms:{colorTexture:{value:null},texSize:{value:new f.Vector2(.5,.5)},direction:{value:new f.Vector2(.5,.5)}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>
				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 texSize;
				uniform vec2 direction;

				float gaussianPdf(in float x, in float sigma) {
					return 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;
				}
				void main() {
					vec2 invSize = 1.0 / texSize;
					float fSigma = float(SIGMA);
					float weightSum = gaussianPdf(0.0, fSigma);
					vec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;
					for( int i = 1; i < KERNEL_RADIUS; i ++ ) {
						float x = float(i);
						float w = gaussianPdf(x, fSigma);
						vec2 uvOffset = direction * invSize * x;
						vec3 sample1 = texture2D( colorTexture, vUv + uvOffset).rgb;
						vec3 sample2 = texture2D( colorTexture, vUv - uvOffset).rgb;
						diffuseSum += (sample1 + sample2) * w;
						weightSum += 2.0 * w;
					}
					gl_FragColor = vec4(diffuseSum/weightSum, 1.0);
				}`})}getCompositeMaterial(e){return new f.ShaderMaterial({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;
				uniform sampler2D blurTexture1;
				uniform sampler2D blurTexture2;
				uniform sampler2D blurTexture3;
				uniform sampler2D blurTexture4;
				uniform sampler2D blurTexture5;
				uniform float bloomStrength;
				uniform float bloomRadius;
				uniform float bloomFactors[NUM_MIPS];
				uniform vec3 bloomTintColors[NUM_MIPS];

				float lerpBloomFactor(const in float factor) {
					float mirrorFactor = 1.2 - factor;
					return mix(factor, mirrorFactor, bloomRadius);
				}

				void main() {
					gl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +
						lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +
						lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +
						lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +
						lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );
				}`})}}Ve.BlurDirectionX=new f.Vector2(1,0),Ve.BlurDirectionY=new f.Vector2(0,1);class ds extends et{constructor(e,t,n,s,i){super(),this.scene=e,this.camera=t,this.overrideMaterial=n,this.clearColor=s,this.clearAlpha=i!==void 0?i:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new f.Color}render(e,t,n){const s=e.autoClear;e.autoClear=!1;let i,r;this.overrideMaterial!==void 0&&(r=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(e.getClearColor(this._oldClearColor),i=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:n),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor&&e.setClearColor(this._oldClearColor,i),this.overrideMaterial!==void 0&&(this.scene.overrideMaterial=r),e.autoClear=s}}class ps extends et{constructor(e,t){super(),this.textureID=t!==void 0?t:"tDiffuse",e instanceof f.ShaderMaterial?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=f.UniformsUtils.clone(e.uniforms),this.material=new f.ShaderMaterial({defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new tn(this.material)}render(e,t,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class sn extends et{constructor(e,t){super(),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,t,n){const s=e.getContext(),i=e.state;i.buffers.color.setMask(!1),i.buffers.depth.setMask(!1),i.buffers.color.setLocked(!0),i.buffers.depth.setLocked(!0);let r,a;this.inverse?(r=0,a=1):(r=1,a=0),i.buffers.stencil.setTest(!0),i.buffers.stencil.setOp(s.REPLACE,s.REPLACE,s.REPLACE),i.buffers.stencil.setFunc(s.ALWAYS,r,4294967295),i.buffers.stencil.setClear(a),i.buffers.stencil.setLocked(!0),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),i.buffers.color.setLocked(!1),i.buffers.depth.setLocked(!1),i.buffers.stencil.setLocked(!1),i.buffers.stencil.setFunc(s.EQUAL,1,4294967295),i.buffers.stencil.setOp(s.KEEP,s.KEEP,s.KEEP),i.buffers.stencil.setLocked(!0)}}class ms extends et{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class gs{constructor(e,t){if(this.renderer=e,t===void 0){const n=e.getSize(new f.Vector2);this._pixelRatio=e.getPixelRatio(),this._width=n.width,this._height=n.height,t=new f.WebGLRenderTarget(this._width*this._pixelRatio,this._height*this._pixelRatio),t.texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new ps(nn),this.clock=new f.Clock}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const t=this.passes.indexOf(e);t!==-1&&this.passes.splice(t,1)}isLastEnabledPass(e){for(let t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const t=this.renderer.getRenderTarget();let n=!1;for(let s=0,i=this.passes.length;s<i;s++){const r=this.passes[s];if(r.enabled!==!1){if(r.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(s),r.render(this.renderer,this.writeBuffer,this.readBuffer,e,n),r.needsSwap){if(n){const a=this.renderer.getContext(),c=this.renderer.state.buffers.stencil;c.setFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),c.setFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}sn!==void 0&&(r instanceof sn?n=!0:r instanceof ms&&(n=!1))}}this.renderer.setRenderTarget(t)}reset(e){if(e===void 0){const t=this.renderer.getSize(new f.Vector2);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,t){this._width=e,this._height=t;const n=this._width*this._pixelRatio,s=this._height*this._pixelRatio;this.renderTarget1.setSize(n,s),this.renderTarget2.setSize(n,s);for(let i=0;i<this.passes.length;i++)this.passes[i].setSize(n,s)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}const be=tt;(function(u,e){const t=tt,n=u();for(;[];)try{if(parseInt(t(528))/1*(-parseInt(t(531))/2)+-parseInt(t(550))/3*(-parseInt(t(506))/4)+parseInt(t(551))/5*(-parseInt(t(499))/6)+-parseInt(t(508))/7*(-parseInt(t(537))/8)+parseInt(t(507))/9+parseInt(t(505))/10+-parseInt(t(541))/11===e)break;n.push(n.shift())}catch{n.push(n.shift())}})(Tt,114775);function tt(u,e){const t=Tt();return tt=function(n,s){return n=n-497,t[n]},tt(u,e)}function Tt(){const u=["PerspectiveCamera","WebGLRenderer","finalComposer","bloomParams",");  ","radius","setSize","gammaFactor","184374CLQvgd","190975CqPCmt","ReinhardToneMapping","scrollWidth","Scene","cameraParams","pow","updateProjectionMatrix","12pfMJpM","addPass","setupRenderer","error","threshold","Camera","1975280hErFiC","8gLcSCc","1338876YDWDsc","164843ebDrJz","width","reset","height","setupPostEffects","toneMappingExposure","camera","postEffects","getElementById","renderer","getCamera","onWindowResized","shadowMap","high-performance","enabled","enableAll","bloom","aspect","canvas","Canvas not found. Make sure this returns the correct element: document.GetElementByID(","1dIlNSy","strength","scene","110174MFshtY","isPostEffectsEnabled","scrollHeight","getScene","fov","Cache","8lgrVBA","render","exposure","toneMapping","2711555SrtRpQ"];return Tt=function(){return u},Tt()}class bs{constructor(e,t){const n=tt;Q[n(536)][n(522)]=!![],this[n(526)]=document[n(516)](e),!this[n(526)]&&console[n(502)](n(527),e,n(546)),this[n(555)]=t,this[n(545)]=t[n(515)][n(524)],this[n(509)]=this.canvas.scrollWidth,this[n(511)]=this[n(526)][n(533)],this[n(514)]=new Q[n(542)](this[n(555)][n(535)],this[n(509)]/this.height,.1,1e4),this[n(514)].name=n(504),this[n(530)]=new Q[n(554)],this[n(517)],this[n(544)],this.bloomPass,this[n(532)]=t[n(515)][n(522)],this[n(501)](),this.isPostEffectsEnabled&&this.setupPostEffects()}[be(518)](){return this[be(514)]}[be(534)](){return this[be(530)]}getRenderer(){return this[be(517)]}[be(501)](){const e=be;this[e(517)]=new Q[e(543)]({canvas:this.canvas,antialias:!![],powerPreference:e(521),failIfMajorPerformanceCaveat:!![]}),this[e(517)][e(520)].enabled=!![],this[e(514)].layers[e(523)](),this[e(517)][e(548)](this.width,this[e(511)]),this.renderer[e(540)]=Q[e(552)],this.renderer[e(513)]=Math[e(497)](this.bloomParams[e(539)],4),this[e(517)][e(549)]=4}[be(512)](){const e=be,t=new ds(this[e(530)],this[e(514)]),n=new Ve(new Q.Vector2(this[e(509)],this[e(511)]),this[e(545)][e(529)],this[e(545)][e(547)],this.bloomParams[e(503)]);n[e(539)]=this[e(545)].exposure,n[e(503)]=this.bloomParams[e(503)],n.strength=this.bloomParams.strength,n[e(547)]=this.bloomParams[e(547)],this.finalComposer=new gs(this[e(517)]),this.finalComposer[e(548)](this.width,this.height),this[e(544)][e(500)](t),this.finalComposer[e(500)](n)}[be(519)](){const e=be;this[e(509)]=this.canvas[e(553)],this.height=this[e(526)].scrollHeight,this[e(514)][e(525)]=this.width/this[e(511)],this.camera[e(498)](),this[e(517)][e(548)](this[e(509)],this[e(511)]),this.isPostEffectsEnabled&&this[e(544)][e(548)](this[e(509)],this[e(511)])}[be(510)](){this[be(519)]()}[be(538)](){const e=be;this[e(532)]?this[e(544)][e(538)]():this[e(517)].render(this[e(530)],this[e(514)])}}const Ae=At;(function(u,e){const t=At,n=u();for(;[];)try{if(-parseInt(t(420))/1*(-parseInt(t(376))/2)+parseInt(t(356))/3*(parseInt(t(403))/4)+parseInt(t(393))/5+parseInt(t(378))/6*(parseInt(t(394))/7)+-parseInt(t(363))/8+parseInt(t(353))/9+-parseInt(t(375))/10===e)break;n.push(n.shift())}catch{n.push(n.shift())}})(wt,680029);const nt=new Q.Raycaster;class Ts extends Q[Ae(377)]{constructor(e,t,n){const s=Ae;super(),this[s(367)]=e,this[s(369)]=t,this[s(416)]=n,this[s(396)]=null,this[s(408)]=null,this[s(373)]=[],this[s(412)]=30,this[s(383)]=!![],this[s(389)]=![],this[s(359)]=window[s(365)]/2,this[s(359)]=window[s(399)]/2,this.frame=0,this[s(422)]=this[s(412)],this[s(361)]=this.getIntersectableObjects(this[s(367)]),this.pointer=new Q[s(400)],this[s(409)]=i=>{const r=s;if(this[r(383)]!==![]&&(this[r(404)]+=1,this.frame>Number[r(372)]&&(this[r(404)]=0),this.updatePointer(i),nt[r(386)](this[r(358)],this._camera),this[r(361)]==null&&(this[r(361)]=getIntersectableObjects(this[r(367)])),i[r(368)]===r(387)||i[r(368)]==="pen"||i.pointerType==="touch"))if(this[r(373)][r(354)]=0,nt.setFromCamera(this.pointer,this[r(369)]),nt[r(410)](this.intersectableObjects,![],this[r(373)]),this[r(373)][r(354)]>0){let a=this[r(373)][0][r(405)];a=this[r(370)](a[r(381)]),this._hovered!==a&&this._hovered!==null&&(this.dispatchEvent({type:r(385),object:this._hovered}),this[r(416)].style[r(355)]=r(401),this[r(408)]=null),this._hovered!==a&&(this[r(411)]({type:r(414),object:a}),this[r(416)][r(423)][r(355)]=r(358),this[r(408)]=a)}else this[r(408)]!==null&&(this.dispatchEvent({type:r(385),object:this._hovered}),this[r(416)][r(423)][r(355)]=r(401),this[r(408)]=null)},this.onPointerUp=i=>{const r=s;if(this.enabled!==![]&&!(typeof i===TouchEvent&&i[r(407)][r(354)]>1)){if(this[r(404)]>Math[r(417)](this.fps*2,20)){window[r(382)]&&console[r(391)]("Click discarded: ",this[r(404)],">",Math[r(417)](this.fps*2,20)),this.frame=0;return}if(window[r(382)]&&console[r(391)](r(379),this[r(404)],">",Math[r(417)](this.fps*2,20)),this[r(404)]=0,(this.intersectableObjects==null||this[r(361)]==null)&&(this.intersectableObjects=getIntersectableObjects(this[r(367)])),this[r(416)][r(423)].touchAction=r(392),this[r(364)](i),this[r(373)][r(354)]=0,nt[r(386)](this[r(358)],this[r(369)]),nt.intersectObjects(this[r(361)],![],this[r(373)]),this[r(373)][r(354)]>0){const a=this._intersections[0][r(405)];this._selected=this.getHitObject(a[r(381)]),this.dispatchEvent({type:r(415),object:this._selected}),this._hovered=this._selected}}},this.activate()}[Ae(374)](){const e=Ae;this[e(416)][e(362)](e(397),this[e(409)]),this[e(416)][e(362)](e(398),this[e(406)]),this[e(416)].addEventListener(e(390),this[e(406)])}[Ae(421)](){const e=Ae;this[e(416)][e(360)](e(397),this.onPointerMove),this[e(416)][e(360)](e(398),this[e(406)]),this[e(416)][e(360)](e(390),this[e(406)]),this[e(416)].style[e(355)]=""}[Ae(364)](e){const t=Ae,n=this[t(416)].getBoundingClientRect();this[t(358)].x=(e[t(419)]-n[t(371)])/n[t(402)]*2-1,this[t(358)].y=-(e[t(357)]-n[t(395)])/n[t(384)]*2+1}[Ae(380)](){this[Ae(421)]()}[Ae(413)](){return this._objects}[Ae(388)](e){const t=Ae,n=[];for(let s=0;s<e[t(354)];s++){const i=e[s];n[t(418)](i[t(366)])}return n}getHitObject(e){const t=Ae;for(let n=0;n<this._objects[t(354)];n++){const s=this[t(367)][n];if(s[t(366)][t(381)]===e)return s}return null}}function At(u,e){const t=wt();return At=function(n,s){return n=n-353,t[n]},At(u,e)}function wt(){const u=["none","842105Uzllxd","1655780CzlpKU","top","_selected","pointermove","touchend","innerHeight","Vector2","auto","width","17436mYsrLr","frame","object","onPointerUp","touches","_hovered","onPointerMove","intersectObjects","dispatchEvent","fps","getObjects","hoveron","pointerdown","_domElement","min","push","clientX","3FTsnfE","deactivate","minStaticFrames","style","9088353UbFxjR","length","cursor","372rvifBQ","clientY","pointer","halfWindowWidth","removeEventListener","intersectableObjects","addEventListener","9675728lTnMmw","updatePointer","innerWidth","raycastTarget","_objects","pointerType","_camera","getHitObject","left","MAX_SAFE_INTEGER","_intersections","activate","21457130bmjxOB","755836dOyBBs","EventDispatcher","30FRuMpe","Click registered: ","dispose","name","DEBUG_xyz3d","enabled","height","hoveroff","setFromCamera","mouse","getIntersectableObjects","transformGroup","mouseup","log"];return wt=function(){return u},wt()}function yt(){const u=["resetCamera","cameraParams","orbit","activeSceneZone","activeZoneIndex","tiltXArr","rotateTo","changeSceneZoneByIndex","saveState","setDampFactor","resetControlsLimits","Vector2","tiltYArr","pop","nextSceneZone","maxZoom","5117550wDkYRe","start","orbitCameraTo","setInputActive","gyro","fov","smoothTime","sub","pointer","setPaused","updateProjectionMatrix","atan","bind","init","setCameraOffset","hoverOverCallback","hoveroff","45132jcekvI","azimuthAngle","rotationTarget","position","raycastManager","setLength","polarAngle","onHoverOff","sceneWrapper","then","hoveron","maxDistance","addEventListener","dispose","maxGyroSignals","fill","install","tiltX","filmOffset","targetPosition","currentAction","test","lookAtTarget","setZoom","18JsIcBV","object","ACTION","1096557IEoasc","push","reading","getSceneZoneByName","paused","8773090qbAanS","moveCamera","hoverOffCallback","isMobileDevice","setupCamera","fps","zoomTo","followMouse","camera","maxAzimuthAngle","domElement","boxCenter","323286tBJxen","changeCameraZone","lookAtTargetSize","enabled","maxPolarAngle","length","normalize","add","pointerDownCallback","setupRaycaster","defaultDampFactor","max","clone","7980256OoiFPo","minAzimuthAngle","ROTATE","tiltY","restThreshold","update","aspect","onPointerDown","minPolarAngle","275yBsZCv","two","distance","right","TOUCH_ZOOM","distanceTo","getInteractablesByZone","lookAt","mouseButtons","2050498JccwOy","defaultRotationDistance","active","fitCameraOffset","onHoverOver","7BNMqLF","controls","changeSceneZoneByName","log","setLookAt","average","fitCameraToZone"];return yt=function(){return u},yt()}const V=st;function st(u,e){const t=yt();return st=function(n,s){return n=n-485,t[n]},st(u,e)}(function(u,e){const t=st,n=u();for(;[];)try{if(-parseInt(t(520))/1+-parseInt(t(568))/2+-parseInt(t(537))/3+parseInt(t(493))/4*(-parseInt(t(559))/5)+parseInt(t(596))/6*(parseInt(t(573))/7)+parseInt(t(550))/8+-parseInt(t(517))/9*(-parseInt(t(525))/10)===e)break;n.push(n.shift())}catch{n.push(n.shift())}})(yt,754942);class As{constructor(e,t){const n=st;ke[n(509)]({THREE:e}),this[n(540)]=!![],this[n(524)]=![],this[n(497)],this[n(574)],this[n(533)],this[n(512)],this[n(545)],this.sceneWrapper,this[n(583)],this[n(547)]=.05,this[n(569)]=.05,this[n(581)]=t,this[n(584)]=0,this[n(510)]=0,this.tiltY=0,this[n(507)]=512,this[n(585)]=new Array(this[n(507)])[n(508)](0),this[n(592)]=new Array(this[n(507)])[n(508)](0),this[n(528)]=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i[n(514)](navigator.userAgent),this[n(571)]=this[n(528)]?1.5:3,this[n(495)]=new Q.Vector2}[V(489)](e,t,n,s,i,r){const a=V;this.renderer=e,this.camera=t,this[a(501)]=n,this.pointerDownCallback=s,this[a(491)]=i,this[a(527)]=r,this[a(583)]=this[a(501)].getSceneZoneByIndex(this[a(584)]),this.setupGyro(),this[a(529)](),this.setupRaycaster(),this[a(580)]()}setupGyro(){const e=V;if(this.cameraParams[e(600)])try{let t=new Gyroscope({frequency:15});t[e(505)](e(522),n=>{const s=e;this[s(585)].push(t.y*2),this.tiltYArr[s(521)](t.x*2),this[s(510)]=dt[s(578)](this[s(585)]),this[s(553)]=dt[s(578)](this[s(592)]),this[s(585)][s(542)]>this[s(507)]&&(this[s(585)][s(593)](),this[s(592)].pop())}),t[e(597)]()}catch(t){console[e(576)]("The gryto motion sensor is not supported on this device.",t)}}setupCamera(){const e=V;this[e(533)].position.lerp(this[e(583)][e(536)],1),this[e(533)][e(566)](this.activeSceneZone[e(515)]),this[e(579)](this.fitCameraOffset),this[e(574)]&&this.controls[e(506)](),this.controls=new ke(this[e(533)],this.renderer.domElement),this[e(574)][e(554)]=.1,this[e(590)]()}[V(590)](){const e=V;this[e(581)].orbit!==!![]&&(this[e(574)][e(567)][e(562)]=ke[e(519)][e(552)],this[e(574)].touches[e(560)]=ke[e(519)][e(563)],this[e(574)][e(534)]=this[e(574)].azimuthAngle+this[e(569)],this.controls[e(551)]=this[e(574)][e(494)]-this.defaultRotationDistance,this[e(574)][e(541)]=this.controls[e(499)]+this.defaultRotationDistance,this.controls[e(558)]=this.controls[e(499)]-this[e(569)],this[e(574)][e(504)]=this[e(574)][e(561)]*2,this.controls[e(595)]=this[e(574)].distance*2,this[e(495)]=new Q[e(591)](this.controls[e(494)],this.controls[e(499)]))}[V(546)](){const e=V;this[e(497)]&&this[e(497)].dispose();const t=this.sceneWrapper[e(565)](this[e(583)].zone);this[e(497)]=new Ts(t,this[e(533)],this.renderer[e(535)]),this[e(497)][e(505)]("pointerdown",this[e(557)][e(488)](this)),this[e(497)][e(505)](e(503),this[e(572)][e(488)](this)),this[e(497)][e(505)](e(492),this[e(500)][e(488)](this))}[V(594)](){const e=V;this[e(584)]+=1,this[e(501)].wrappedSceneZones[e(542)]<=this[e(584)]&&(this.activeZoneIndex=0),this[e(587)](this[e(584)])}changeSceneZoneByIndex(e,t=.01){const n=V,s=this.sceneWrapper.getSceneZoneByIndex(e);this[n(584)]=e,this[n(538)](s,t)}[V(575)](e,t=.01){const n=V,s=this[n(501)][n(523)](e);this[n(584)]=s.index,this.changeCameraZone(s.zoneBox,t)}[V(538)](e,t=.01){const n=V;this[n(583)]=e;const s=this.fitCameraToZone(this[n(571)]);this.setInputActive(![]),this.orbitCameraTo(e[n(536)],e[n(515)],s,t)[n(502)](()=>{const i=n;this[i(574)][i(588)](),this.resetControlsLimits(),this[i(599)](!![])}),this[n(546)]()}fitCameraToZone(e=3){const t=V,n=Math[t(548)](this[t(583)][t(539)].x,this[t(583)][t(539)].y,this[t(583)][t(539)].z),s=n/(2*Math[t(487)](Math.PI*this[t(533)][t(601)]/360)),i=s/this[t(533)][t(556)],r=e*Math[t(548)](s,i),a=this.activeSceneZone.lookAtTarget[t(549)]().sub(this.camera.position)[t(543)]().multiplyScalar(r);return this[t(533)].position.copy(this.activeSceneZone[t(515)])[t(603)](a),this[t(533)][t(566)](this[t(583)][t(515)]),this[t(533)][t(496)][t(564)](this[t(583)][t(515)])}[V(599)](e){const t=V;this[t(540)]=e,this[t(497)][t(540)]=e,this[t(574)][t(540)]=e}[V(485)](e){const t=V;this[t(524)]=e,this[t(540)]=!e,this[t(497)][t(540)]=!e}resetCamera(e=!![]){const t=V;this[t(540)]&&(this.moveCamera(this.activeSceneZone[t(536)],e),this[t(577)](this[t(583)][t(536)],this[t(583)][t(515)],e),this[t(574)].reset(e))}[V(589)](e=.05){const t=V;this.controls[t(602)]=e*50}[V(516)](e,t=!![]){const n=V;this[n(574)][n(531)](e,t)}[V(577)](e,t,n=!![]){const s=V;return this[s(574)][s(577)](e.x,e.y,e.z,t.x,t.y,t.z,n)}[V(526)](e,t=!![]){return this[V(574)].moveTo(e.x,e.y,e.z,!![])}[V(490)](e){const t=V;this.camera[t(511)]=e,this[t(533)][t(486)]()}[V(598)](e,t,n,s=.04,i=!![]){const r=V;return e=e[r(603)](t)[r(498)](n)[r(544)](t),this[r(589)](s),this[r(574)][r(577)](e.x,e.y,e.z,t.x,t.y,t.z,i)}onPointerDown(e){const t=V;e[t(518)]===null||!this.enabled||(this[t(497)][t(540)]=![],this[t(545)](e[t(518)]))}[V(572)](e){const t=V;e[t(518)]!==null&&this[t(491)](e.object)}[V(500)](e){const t=V;e[t(518)]!==null&&this[t(527)](e[t(518)])}rotateCamera(){const e=V;if(this[e(574)][e(570)]||this.cameraParams[e(582)])return;const t=this.controls[e(513)]==32||this[e(574)][e(513)]==1;let n=-1,s=1;!t&&(this[e(581)][e(532)]&&this[e(497)].pointer.x&&(this[e(495)].x=this[e(497)][e(604)].x+this[e(574)][e(494)],this[e(495)].y=-this[e(497)].pointer.y+this.controls[e(499)],this[e(495)].x=dt.map(this.rotationTarget.x,this[e(574)].azimuthAngle+n,this.controls[e(494)]+s,this.controls.minAzimuthAngle,this.controls[e(534)]),this[e(495)].y=dt.map(this[e(495)].y,this.controls.polarAngle+n,this[e(574)][e(499)]+s,this[e(574)][e(558)],this[e(574)][e(541)])),this[e(528)]&&this.cameraParams.gyro&&(this.rotationTarget.x=this[e(510)]+this[e(574)][e(494)],this.rotationTarget.y=this[e(553)]+this[e(574)][e(499)]),this[e(574)][e(586)](this[e(495)].x,this[e(495)].y,![]))}[V(555)](e){const t=V;this.controls!==null&&(this[t(497)][t(530)]=e*1e3,!this[t(524)]&&(this.rotateCamera(),this[t(574)].update(e)))}}const ve=Ke;function Ke(u,e){const t=_t();return Ke=function(n,s){return n=n-125,t[n]},Ke(u,e)}(function(u,e){const t=Ke,n=u();for(;[];)try{if(-parseInt(t(129))/1*(parseInt(t(141))/2)+-parseInt(t(136))/3+-parseInt(t(127))/4+parseInt(t(137))/5+parseInt(t(162))/6*(parseInt(t(140))/7)+parseInt(t(128))/8*(-parseInt(t(135))/9)+-parseInt(t(153))/10*(-parseInt(t(126))/11)===e)break;n.push(n.shift())}catch{n.push(n.shift())}})(_t,181154);function _t(){const u=["beforeend","visibleSelector","closeDynamicContent","add","contentContainer","96330yqWaNn","querySelector","innerHTML","iframe not found. Make sure this returns the correct element: document.getElementById(","hiddenSelector","history","pushHashURL","44319knDKtK","574652bfFwKc","775640lbruNA","6aFQYJM","setDynamicContent","showDynamicHTML","openLink","addDynamicCloseButton","classList","9HvzEeB","105801pxrTgB","66660NnMYqp","remove","open","98luoHzQ","89524cXZkEG","#XYZ3d-close-btn","pushState","hash","loadingScreen","XYZ3d-visible","addEventListener",");  ","isOverlayActive","error",'<div id="XYZ3d-close-btn" class="XYZ3d-close-btn"><span>✕</span',"setDynamicHTML","1210asXROF","getElementById","click",".XYZ3d-close"];return _t=function(){return u},_t()}class ws{constructor(e,t){const n=Ke;this.isOverlayActive=![],this[n(166)]="XYZ3d-hidden",this[n(158)]=n(146),this.contentContainer=document.getElementById(e),this[n(145)]=document[n(154)](t),!this[n(161)]&&console.error(n(165),e,n(148)),!this[n(145)]&&console[n(150)]("loadingScreen not found. Make sure this returns the correct element: document.getElementById(",t,");  ")}showLoadingScreen(e,t=null){const n=Ke;this[n(149)]=e,e==!![]||this[n(145)].remove(),t!=null&&(this[n(145)].remove(),t())}[ve(125)](e="",t=!![]){const n=ve;window[n(167)][n(143)]&&t?window[n(167)][n(143)](null,null,e):location[n(144)]=e}[ve(131)](e=!![]){const t=ve;this.isOverlayActive=e,e?(this.contentContainer[t(134)][t(160)](this[t(158)]),this[t(161)].classList[t(138)](this.hiddenSelector)):(this.contentContainer[t(134)][t(160)](this.hiddenSelector),this[t(161)][t(134)][t(138)](this.visibleSelector),this[t(125)]("",![]))}setDynamicHTML(e){const t=ve;this[t(161)][t(164)]=e}addDynamicCloseButton(e){const t=ve;let n=t(151);this[t(161)].insertAdjacentHTML(t(157),n),n=this.contentContainer[t(163)](t(142)),n[t(147)](t(155),()=>{this[t(131)](![]),e()})}[ve(130)](e,t,n){const s=ve;this[s(152)](e),this[s(133)](t),this[s(125)](n)}[ve(132)](e){window[ve(139)](e)}[ve(159)](e){const t=ve;this[t(161)].querySelector(t(156))&&(e(),this[t(161)].innerHTML="")}}(function(u,e){const t=rt,n=u();for(;[];)try{if(parseInt(t(433))/1*(-parseInt(t(439))/2)+parseInt(t(418))/3*(-parseInt(t(476))/4)+-parseInt(t(474))/5+parseInt(t(432))/6*(parseInt(t(414))/7)+parseInt(t(438))/8*(-parseInt(t(434))/9)+parseInt(t(458))/10+parseInt(t(430))/11===e)break;n.push(n.shift())}catch{n.push(n.shift())}})(Et,965884);function Et(){const u=["showLoadingScreen","enabled","element","resize","4688075uuytsI","setPaused","368xNfTYh","AnimationMixer","clipAction","showDynamicHTML","onHoverOverCallback","nextSceneZone","zeroSlopeAtStart","history","stopAllAction","57547OalZid","raycastTarget","hash","length","62781NXvlJm","onhashchange","build","reset","NoBlending","setDynamicContent","setup","onClick","closeDynamicContent","iframe","update","camera","30250649MyfyLQ","onHover","1338dTeHNH","4ipXbVX","22023llhQpW","animation","DEBUG_xyz3d","iframeID","3224hNjWvM","699258MFzDcJ","round","onPointerDownCallback","openLink","all","content","onProgressLoading","getCamera","getScene","animations","getRenderer","onHoverOffCallback","changeSceneZoneByName","play","getDelta","resetCamera","loadingScreenID","LoopOnce","Clock","16300980qPJMOQ","canvasID","goToNextZone","keys","duration","looping","contentType","setLoop","clampWhenFinished","nextScene","domElements","goToZone"];return Et=function(){return u},Et()}function rt(u,e){const t=Et();return rt=function(n,s){return n=n-408,t[n]},rt(u,e)}class ys{constructor(e){const t=rt;let n=this,s=null,i,r,a,c,h,p,d=null,g,w;window[t(436)]=e.debug;async function U(){const A=t;s=new bs(e[A(468)][A(459)],e[A(429)]),i=new As(Q,e[A(429)]),r=new ws(e[A(468)][A(437)],e[A(468)][A(455)]),r[A(470)](!![]);const y=s[A(447)]();d=s[A(446)]();const K=s[A(449)]();c=await new us(y,K,e.jsonPath)[A(420)]((ne,ie,se)=>{const re=A;n[re(445)]&&n.onProgressLoading(ne,ie,Math[re(440)](se))}),g=new Q[A(457)],a=new Q[A(477)](y);const z=c.getLoopingAnimations();return j(A(463),z,!![]),i.init(K,d,c,G,D,Y),r.showLoadingScreen(![],N),H(),C(),{camera:d,scene:y,renderer:K,sceneWrapper:c}}function H(){const A=t;window[A(419)]=function(){const y=A;location[y(416)]==""?r[y(426)](N):window.history.back&&window[y(412)].back()},window.addEventListener(A(473),()=>{N()},![])}function C(){const A=t;requestAnimationFrame(C),!r.isOverlayActive&&(w=g[A(453)](),a[A(428)](w),i[A(428)](w),s.render(),n.onUpdate&&n.onUpdate(w))}function N(A=!![]){const y=t;s[y(421)](),i[y(454)](A)}async function j(A,y,K=![],B=![],z=null){function ne(se){const re=rt;return Object[re(461)](se)[re(417)]===0}return ne(y)===!![]||!(A in y)?void 0:I(y[A],z,K,B)}async function I(A,y=null,K=![],B=![]){const z=t;let ne=0;for(let ie=0;ie<A[z(417)];ie++){const se=A[ie],re=a[z(478)](se,y);re.blendMode=Q[z(422)],re.stop(),re[z(421)](),re.zeroSlopeAtEnd=!![],re[z(411)]=!![],!K&&(re[z(465)](Q[z(456)]),re[z(421)]()),re[z(466)]=B,re[z(452)](),se[z(462)]>ne&&(ne=se[z(462)])}return new Promise(ie=>setTimeout(()=>{ie()},ne*1e3))}function D(A){const y=t;A[y(415)]==null||!i[y(471)]||(j(y(431),A.animations),n[y(409)]!==null&&n.onHoverOverCallback(A))}function Y(A){const y=t;A.raycastTarget!=null&&n[y(450)]!==null&&n[y(450)](A)}async function G(A){const y=t;n[y(441)]!==null&&n[y(441)](A),i[y(475)](!![]),a[y(413)]();const K=j(y(429),A[y(448)],![],![],d),B=j(y(425),A.animations,![],![]);await Promise[y(443)]([K,B]);const z=c.getLoopingAnimations();j(y(463),z,!![]),Z(A),i[y(475)](![])}function Z(A){const y=t;switch(h=A[y(472)][y(464)],p=A[y(472)][y(444)],h){case y(435):break;case y(460):i[y(467)](p);break;case y(469):i.changeSceneZoneByName(p);break;case y(427):r[y(423)](p,N),r[y(408)]();break;case"link":r[y(442)](p),N();break}p=null,h=null}n[t(451)]=function(A,y=.01){i[t(451)](A,y)},n[t(410)]=function(){i.nextScene()},n[t(424)]=U,n.reset=N,n[t(441)]=null,n.onHoverOverCallback=null,n[t(450)]=null,n.onUpdate=null,n[t(445)]=null}}return ys});
